{
  "version": 3,
  "sources": ["../../node_modules/react-complex-tree/lib/esm/treeItem/TreeItemElement.js", "../../node_modules/react-complex-tree/lib/esm/treeItem/TreeItemChildren.js", "../../node_modules/react-complex-tree/lib/esm/tree/Tree.js", "../../node_modules/react-complex-tree/lib/esm/controlledEnvironment/ControlledTreeEnvironment.js", "../../node_modules/react-complex-tree/lib/esm/controlledEnvironment/InteractionManagerProvider.js", "../../node_modules/react-complex-tree/lib/esm/types.js", "../../node_modules/react-complex-tree/lib/esm/controlledEnvironment/mergeInteractionManagers.js", "../../node_modules/react-complex-tree/lib/esm/isControlKey.js", "../../node_modules/react-complex-tree/lib/esm/interactionMode/DoubleClickItemToExpandInteractionManager.js", "../../node_modules/react-complex-tree/lib/esm/interactionMode/ClickItemToExpandInteractionManager.js", "../../node_modules/react-complex-tree/lib/esm/interactionMode/ClickArrowToExpandInteractionManager.js", "../../node_modules/react-complex-tree/lib/esm/controlledEnvironment/buildInteractionMode.js", "../../node_modules/react-complex-tree/lib/esm/drag/DragAndDropProvider.js", "../../node_modules/react-complex-tree/lib/esm/drag/useCanDropAt.js", "../../node_modules/react-complex-tree/lib/esm/drag/useGetViableDragPositions.js", "../../node_modules/react-complex-tree/lib/esm/drag/useGetParentOfLinearItem.js", "../../node_modules/react-complex-tree/lib/esm/useSideEffect.js", "../../node_modules/react-complex-tree/lib/esm/utils.js", "../../node_modules/react-complex-tree/lib/esm/useCallSoon.js", "../../node_modules/react-complex-tree/lib/esm/useStableHandler.js", "../../node_modules/react-complex-tree/lib/esm/useRefCopy.js", "../../node_modules/react-complex-tree/lib/esm/useGetOriginalItemOrder.js", "../../node_modules/react-complex-tree/lib/esm/drag/useDraggingPosition.js", "../../node_modules/react-complex-tree/lib/esm/controlledEnvironment/layoutUtils.js", "../../node_modules/react-complex-tree/lib/esm/drag/DraggingPositionEvaluation.js", "../../node_modules/react-complex-tree/lib/esm/environmentActions/EnvironmentActionsProvider.js", "../../node_modules/react-complex-tree/lib/esm/environmentActions/useCreatedEnvironmentRef.js", "../../node_modules/react-complex-tree/lib/esm/waitFor.js", "../../node_modules/react-complex-tree/lib/esm/controlledEnvironment/useControlledTreeEnvironmentProps.js", "../../node_modules/react-complex-tree/lib/esm/tree/scrollIntoView.js", "../../node_modules/react-complex-tree/lib/esm/renderers/useRenderers.js", "../../node_modules/react-complex-tree/lib/esm/renderers/createDefaultRenderers.js", "../../node_modules/react-complex-tree/lib/esm/tree/getItemsLinearly.js", "../../node_modules/react-complex-tree/lib/esm/tree/TreeManager.js", "../../node_modules/react-complex-tree/lib/esm/tree/DragBetweenLine.js", "../../node_modules/react-complex-tree/lib/esm/tree/useFocusWithin.js", "../../node_modules/react-complex-tree/lib/esm/useHtmlElementEventListener.js", "../../node_modules/react-complex-tree/lib/esm/hotkeys/useKey.js", "../../node_modules/react-complex-tree/lib/esm/hotkeys/useHotkey.js", "../../node_modules/react-complex-tree/lib/esm/hotkeys/useKeyboardBindings.js", "../../node_modules/react-complex-tree/lib/esm/hotkeys/defaultKeyboardBindings.js", "../../node_modules/react-complex-tree/lib/esm/tree/useViewState.js", "../../node_modules/react-complex-tree/lib/esm/controlledEnvironment/useLinearItems.js", "../../node_modules/react-complex-tree/lib/esm/tree/useMoveFocusToIndex.js", "../../node_modules/react-complex-tree/lib/esm/tree/useSelectUpTo.js", "../../node_modules/react-complex-tree/lib/esm/tree/useTreeKeyboardBindings.js", "../../node_modules/react-complex-tree/lib/esm/search/defaultMatcher.js", "../../node_modules/react-complex-tree/lib/esm/search/useSearchMatchFocus.js", "../../node_modules/react-complex-tree/lib/esm/search/SearchInput.js", "../../node_modules/react-complex-tree/lib/esm/tree/MaybeLiveDescription.js", "../../node_modules/react-complex-tree/lib/esm/tree/LiveDescription.js", "../../node_modules/react-complex-tree/lib/esm/tree/defaultLiveDescriptors.js", "../../node_modules/react-complex-tree/lib/esm/tree/resolveLiveDescriptor.js", "../../node_modules/react-complex-tree/lib/esm/tree/useCreatedTreeInformation.js", "../../node_modules/react-complex-tree/lib/esm/treeActions/TreeActionsProvider.js", "../../node_modules/react-complex-tree/lib/esm/treeActions/useCreatedTreeRef.js", "../../node_modules/react-complex-tree/lib/esm/treeItem/useTreeItemRenderContext.js", "../../node_modules/react-complex-tree/lib/esm/treeItem/TreeItemRenamingInput.js", "../../node_modules/react-complex-tree/lib/esm/uncontrolledEnvironment/UncontrolledTreeEnvironment.js", "../../node_modules/react-complex-tree/lib/esm/uncontrolledEnvironment/CompleteTreeDataProvider.js", "../../node_modules/react-complex-tree/lib/esm/useIsMounted.js", "../../node_modules/react-complex-tree/lib/esm/EventEmitter.js", "../../node_modules/react-complex-tree/lib/esm/uncontrolledEnvironment/StaticTreeDataProvider.js", "../../node_modules/react-complex-tree/lib/esm/index.js"],
  "sourcesContent": ["import React, { useMemo, useState } from 'react';\nimport { TreeItemChildren } from './TreeItemChildren';\nimport { useViewState } from '../tree/useViewState';\nimport { useTree } from '../tree/Tree';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useTreeItemRenderContext } from './useTreeItemRenderContext';\nimport { TreeItemRenamingInput } from './TreeItemRenamingInput';\nexport var TreeItemElement = function (props) {\n    var _a, _b, _c, _d;\n    var _e = useState(false), hasBeenRequested = _e[0], setHasBeenRequested = _e[1];\n    var _f = useTree(), renderers = _f.renderers, treeInformation = _f.treeInformation, renamingItem = _f.renamingItem;\n    var environment = useTreeEnvironment();\n    var viewState = useViewState();\n    var item = environment.items[props.itemIndex];\n    var isExpanded = useMemo(function () { var _a; return (_a = viewState.expandedItems) === null || _a === void 0 ? void 0 : _a.includes(props.itemIndex); }, [props.itemIndex, viewState.expandedItems]);\n    var renderContext = useTreeItemRenderContext(item);\n    if (item === undefined || renderContext === undefined) {\n        if (!hasBeenRequested) {\n            setHasBeenRequested(true);\n            (_a = environment.onMissingItems) === null || _a === void 0 ? void 0 : _a.call(environment, [props.itemIndex]);\n        }\n        return null;\n    }\n    var shouldRenderChildren = (_c = (_b = environment.shouldRenderChildren) === null || _b === void 0 ? void 0 : _b.call(environment, item, renderContext)) !== null && _c !== void 0 ? _c : (item.isFolder && isExpanded);\n    var children = item.children && shouldRenderChildren && (React.createElement(TreeItemChildren, { depth: props.depth + 1, parentId: props.itemIndex }, item.children));\n    var title = environment.getItemTitle(item);\n    var titleComponent = renamingItem === props.itemIndex ? (React.createElement(TreeItemRenamingInput, { itemIndex: props.itemIndex })) : (renderers.renderItemTitle({\n        info: treeInformation,\n        context: renderContext,\n        title: title,\n        item: item,\n    }));\n    var arrowComponent = renderers.renderItemArrow({\n        info: treeInformation,\n        context: renderContext,\n        item: environment.items[props.itemIndex],\n    });\n    return ((_d = renderers.renderItem({\n        item: environment.items[props.itemIndex],\n        depth: props.depth,\n        title: titleComponent,\n        arrow: arrowComponent,\n        context: renderContext,\n        info: treeInformation,\n        children: children,\n    })) !== null && _d !== void 0 ? _d : null); // Type to use AllTreeRenderProps\n};\n", "import React from 'react';\nimport { TreeItemElement } from './TreeItemElement';\nimport { useTree } from '../tree/Tree';\nexport var TreeItemChildren = function (props) {\n    var _a = useTree(), renderers = _a.renderers, treeInformation = _a.treeInformation;\n    var childElements = [];\n    for (var _i = 0, _b = props.children; _i < _b.length; _i++) {\n        var child = _b[_i];\n        childElements.push(React.createElement(TreeItemElement, { key: child, itemIndex: child, depth: props.depth }));\n    }\n    if (childElements.length === 0) {\n        return null;\n    }\n    var containerProps = {\n        role: props.depth !== 0 ? 'group' : undefined,\n    };\n    return renderers.renderItemsContainer({\n        children: childElements,\n        info: treeInformation,\n        containerProps: containerProps,\n        depth: props.depth,\n        parentId: props.parentId,\n    });\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { useContext, useEffect, useMemo, useState } from 'react';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { TreeManager } from './TreeManager';\nimport { useCreatedTreeInformation } from './useCreatedTreeInformation';\nimport { getItemsLinearly } from './getItemsLinearly';\nimport { TreeActionsProvider } from '../treeActions/TreeActionsProvider';\nvar TreeContext = React.createContext(null); // TODO default value\nexport var useTree = function () { return useContext(TreeContext); };\nexport var Tree = React.forwardRef(function (props, ref) {\n    var _a;\n    var environment = useTreeEnvironment();\n    var renderers = useMemo(function () { return (__assign(__assign({}, environment), props)); }, [props, environment]);\n    var _b = useState(null), search = _b[0], setSearch = _b[1];\n    var _c = useState(null), renamingItem = _c[0], setRenamingItem = _c[1];\n    var rootItem = environment.items[props.rootItem];\n    var viewState = environment.viewState[props.treeId];\n    useEffect(function () {\n        environment.registerTree({\n            treeId: props.treeId,\n            rootItem: props.rootItem,\n        });\n        return function () { return environment.unregisterTree(props.treeId); };\n        // TODO should be able to remove soon, and add environment.registerTree, environment.unregisterTree as deps\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.treeId, props.rootItem]);\n    var treeInformation = useCreatedTreeInformation(props, renamingItem, search);\n    var treeContextProps = useMemo(function () { return ({\n        treeId: props.treeId,\n        rootItem: props.rootItem,\n        treeLabel: props.treeLabel,\n        treeLabelledBy: props.treeLabelledBy,\n        getItemsLinearly: function () {\n            return getItemsLinearly(props.rootItem, viewState !== null && viewState !== void 0 ? viewState : {}, environment.items);\n        },\n        treeInformation: treeInformation,\n        search: search,\n        setSearch: setSearch,\n        renamingItem: renamingItem,\n        setRenamingItem: setRenamingItem,\n        renderers: renderers,\n    }); }, [\n        environment.items,\n        props.rootItem,\n        props.treeId,\n        props.treeLabel,\n        props.treeLabelledBy,\n        renamingItem,\n        renderers,\n        search,\n        treeInformation,\n        viewState,\n    ]);\n    if (rootItem === undefined) {\n        (_a = environment.onMissingItems) === null || _a === void 0 ? void 0 : _a.call(environment, [props.rootItem]);\n        return null;\n    }\n    return (React.createElement(TreeContext.Provider, { value: treeContextProps },\n        React.createElement(TreeActionsProvider, { ref: ref },\n            React.createElement(TreeManager, null))));\n});\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { InteractionManagerProvider } from './InteractionManagerProvider';\nimport { DragAndDropProvider } from '../drag/DragAndDropProvider';\nimport { EnvironmentActionsProvider } from '../environmentActions/EnvironmentActionsProvider';\nimport { useControlledTreeEnvironmentProps } from './useControlledTreeEnvironmentProps';\nvar TreeEnvironmentContext = React.createContext(null);\nexport var useTreeEnvironment = function () { return useContext(TreeEnvironmentContext); };\nexport var ControlledTreeEnvironment = React.forwardRef(function (props, ref) {\n    var _a, _b, _c;\n    var environmentContextProps = useControlledTreeEnvironmentProps(props);\n    var viewState = props.viewState;\n    // Make sure that every tree view state has a focused item\n    for (var _i = 0, _d = Object.keys(environmentContextProps.trees); _i < _d.length; _i++) {\n        var treeId = _d[_i];\n        // TODO if the focus item is dragged out of the tree and is not within the expanded items\n        // TODO of that tree, the tree does not show any focus item anymore.\n        // Fix: use linear items to see if focus item is visible, and reset if not. Only refresh that\n        // information when the viewstate changes\n        if (!((_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.focusedItem) &&\n            environmentContextProps.trees[treeId]) {\n            viewState[treeId] = __assign(__assign({}, viewState[treeId]), { focusedItem: (_c = (_b = props.items[environmentContextProps.trees[treeId].rootItem]) === null || _b === void 0 ? void 0 : _b.children) === null || _c === void 0 ? void 0 : _c[0] });\n        }\n    }\n    return (React.createElement(TreeEnvironmentContext.Provider, { value: environmentContextProps },\n        React.createElement(InteractionManagerProvider, null,\n            React.createElement(DragAndDropProvider, null,\n                React.createElement(EnvironmentActionsProvider, { ref: ref }, props.children)))));\n});\n", "import * as React from 'react';\nimport { useMemo } from 'react';\nimport { InteractionMode } from '../types';\nimport { useTreeEnvironment } from './ControlledTreeEnvironment';\nimport { mergeInteractionManagers } from './mergeInteractionManagers';\nimport { buildInteractionMode } from './buildInteractionMode';\nvar InteractionManagerContext = React.createContext(null);\nexport var useInteractionManager = function () {\n    return React.useContext(InteractionManagerContext);\n};\nexport var InteractionManagerProvider = function (_a) {\n    var children = _a.children;\n    var environment = useTreeEnvironment();\n    var defaultInteractionMode = environment.defaultInteractionMode;\n    var interactionManager = useMemo(function () {\n        var _a;\n        if (defaultInteractionMode && typeof defaultInteractionMode !== 'string') {\n            if (defaultInteractionMode.extends) {\n                return mergeInteractionManagers(defaultInteractionMode, buildInteractionMode(defaultInteractionMode.extends, environment));\n            }\n            return defaultInteractionMode;\n        }\n        return buildInteractionMode((_a = defaultInteractionMode) !== null && _a !== void 0 ? _a : InteractionMode.ClickItemToExpand, environment);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []); // TODO make sure that environment does not need to be refreshed\n    return (React.createElement(InteractionManagerContext.Provider, { value: interactionManager }, children));\n};\n", "export var InteractionMode;\n(function (InteractionMode) {\n    InteractionMode[\"DoubleClickItemToExpand\"] = \"double-click-item-to-expand\";\n    InteractionMode[\"ClickItemToExpand\"] = \"click-item-to-expand\";\n    InteractionMode[\"ClickArrowToExpand\"] = \"click-arrow-to-expand\";\n})(InteractionMode || (InteractionMode = {}));\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexport var mergeInteractionManagers = function (main, fallback) { return ({\n    mode: main.mode,\n    createInteractiveElementProps: function (item, treeId, actions, renderFlags) { return (__assign(__assign({}, fallback.createInteractiveElementProps(item, treeId, actions, renderFlags)), main.createInteractiveElementProps(item, treeId, actions, renderFlags))); },\n}); };\n", "export var isControlKey = function (e) {\n    return e.ctrlKey ||\n        (navigator.platform.toUpperCase().indexOf('MAC') >= 0 && e.metaKey);\n};\n", "import { InteractionMode, } from '../types';\nimport { isControlKey } from '../isControlKey';\nvar DoubleClickItemToExpandInteractionManager = /** @class */ (function () {\n    function DoubleClickItemToExpandInteractionManager(environment) {\n        this.mode = InteractionMode.DoubleClickItemToExpand;\n        this.environment = environment;\n    }\n    DoubleClickItemToExpandInteractionManager.prototype.createInteractiveElementProps = function (item, treeId, actions, renderFlags) {\n        var _this = this;\n        return {\n            onClick: function (e) {\n                actions.focusItem();\n                if (e.shiftKey) {\n                    actions.selectUpTo(!isControlKey(e));\n                }\n                else if (isControlKey(e)) {\n                    if (renderFlags.isSelected) {\n                        actions.unselectItem();\n                    }\n                    else {\n                        actions.addToSelectedItems();\n                    }\n                }\n                else {\n                    actions.selectItem();\n                }\n            },\n            onDoubleClick: function () {\n                actions.focusItem();\n                actions.selectItem();\n                if (item.isFolder) {\n                    actions.toggleExpandedState();\n                }\n                if (!item.isFolder ||\n                    _this.environment.canInvokePrimaryActionOnItemContainer) {\n                    actions.primaryAction();\n                }\n            },\n            onFocus: function () {\n                actions.focusItem();\n            },\n            onDragStart: function (e) {\n                e.dataTransfer.dropEffect = 'move';\n                actions.startDragging();\n            },\n            onDragOver: function (e) {\n                e.preventDefault(); // Allow drop\n            },\n            draggable: renderFlags.canDrag && !renderFlags.isRenaming,\n            tabIndex: !renderFlags.isRenaming\n                ? renderFlags.isFocused\n                    ? 0\n                    : -1\n                : undefined,\n        };\n    };\n    return DoubleClickItemToExpandInteractionManager;\n}());\nexport { DoubleClickItemToExpandInteractionManager };\n", "import { InteractionMode, } from '../types';\nimport { isControlKey } from '../isControlKey';\nvar ClickItemToExpandInteractionManager = /** @class */ (function () {\n    function ClickItemToExpandInteractionManager(environment) {\n        this.mode = InteractionMode.ClickItemToExpand;\n        this.environment = environment;\n    }\n    ClickItemToExpandInteractionManager.prototype.createInteractiveElementProps = function (item, treeId, actions, renderFlags) {\n        var _this = this;\n        return {\n            onClick: function (e) {\n                actions.focusItem();\n                if (e.shiftKey) {\n                    actions.selectUpTo(!isControlKey(e));\n                }\n                else if (isControlKey(e)) {\n                    if (renderFlags.isSelected) {\n                        actions.unselectItem();\n                    }\n                    else {\n                        actions.addToSelectedItems();\n                    }\n                }\n                else {\n                    if (item.isFolder) {\n                        actions.toggleExpandedState();\n                    }\n                    actions.selectItem();\n                    if (!item.isFolder ||\n                        _this.environment.canInvokePrimaryActionOnItemContainer) {\n                        actions.primaryAction();\n                    }\n                }\n            },\n            onFocus: function () {\n                actions.focusItem();\n            },\n            onDragStart: function (e) {\n                e.dataTransfer.dropEffect = 'move';\n                actions.startDragging();\n            },\n            onDragOver: function (e) {\n                e.preventDefault(); // Allow drop\n            },\n            draggable: renderFlags.canDrag && !renderFlags.isRenaming,\n            tabIndex: !renderFlags.isRenaming\n                ? renderFlags.isFocused\n                    ? 0\n                    : -1\n                : undefined,\n        };\n    };\n    return ClickItemToExpandInteractionManager;\n}());\nexport { ClickItemToExpandInteractionManager };\n", "import { InteractionMode, } from '../types';\nimport { isControlKey } from '../isControlKey';\nvar ClickArrowToExpandInteractionManager = /** @class */ (function () {\n    function ClickArrowToExpandInteractionManager(environment) {\n        this.mode = InteractionMode.ClickItemToExpand;\n        this.environment = environment;\n    }\n    ClickArrowToExpandInteractionManager.prototype.createInteractiveElementProps = function (item, treeId, actions, renderFlags) {\n        var _this = this;\n        return {\n            onClick: function (e) {\n                actions.focusItem();\n                if (e.shiftKey) {\n                    actions.selectUpTo(!isControlKey(e));\n                }\n                else if (isControlKey(e)) {\n                    if (renderFlags.isSelected) {\n                        actions.unselectItem();\n                    }\n                    else {\n                        actions.addToSelectedItems();\n                    }\n                }\n                else {\n                    actions.selectItem();\n                    if (!item.isFolder ||\n                        _this.environment.canInvokePrimaryActionOnItemContainer) {\n                        actions.primaryAction();\n                    }\n                }\n            },\n            onFocus: function () {\n                actions.focusItem();\n            },\n            onDragStart: function (e) {\n                e.dataTransfer.dropEffect = 'move';\n                actions.startDragging();\n            },\n            onDragOver: function (e) {\n                e.preventDefault(); // Allow drop\n            },\n            draggable: renderFlags.canDrag && !renderFlags.isRenaming,\n            tabIndex: !renderFlags.isRenaming\n                ? renderFlags.isFocused\n                    ? 0\n                    : -1\n                : undefined,\n        };\n    };\n    return ClickArrowToExpandInteractionManager;\n}());\nexport { ClickArrowToExpandInteractionManager };\n", "import { InteractionMode } from '../types';\nimport { DoubleClickItemToExpandInteractionManager } from '../interactionMode/DoubleClickItemToExpandInteractionManager';\nimport { ClickItemToExpandInteractionManager } from '../interactionMode/ClickItemToExpandInteractionManager';\nimport { ClickArrowToExpandInteractionManager } from '../interactionMode/ClickArrowToExpandInteractionManager';\nexport var buildInteractionMode = function (mode, environment) {\n    switch (mode) {\n        case InteractionMode.DoubleClickItemToExpand:\n            return new DoubleClickItemToExpandInteractionManager(environment);\n        case InteractionMode.ClickItemToExpand:\n            return new ClickItemToExpandInteractionManager(environment);\n        case InteractionMode.ClickArrowToExpand:\n            return new ClickArrowToExpandInteractionManager(environment);\n        default:\n            throw Error(\"Unknown interaction mode \".concat(mode));\n    }\n};\n", "import * as React from 'react';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useCanDropAt } from './useCanDropAt';\nimport { useGetViableDragPositions } from './useGetViableDragPositions';\nimport { useSideEffect } from '../useSideEffect';\nimport { buildMapForTrees } from '../utils';\nimport { useCallSoon } from '../useCallSoon';\nimport { useStableHandler } from '../useStableHandler';\nimport { useGetOriginalItemOrder } from '../useGetOriginalItemOrder';\nimport { useDraggingPosition } from './useDraggingPosition';\nimport { isOutsideOfContainer } from '../controlledEnvironment/layoutUtils';\nvar DragAndDropContext = React.createContext(null);\nexport var useDragAndDrop = function () { return React.useContext(DragAndDropContext); };\nexport var DragAndDropProvider = function (_a) {\n    var children = _a.children;\n    var environment = useTreeEnvironment();\n    var _b = useState(false), isProgrammaticallyDragging = _b[0], setIsProgrammaticallyDragging = _b[1];\n    var _c = useState({}), viableDragPositions = _c[0], setViableDragPositions = _c[1];\n    var _d = useState(0), programmaticDragIndex = _d[0], setProgrammaticDragIndex = _d[1];\n    var _e = useState(), draggingPosition = _e[0], setDraggingPosition = _e[1];\n    var getViableDragPositions = useGetViableDragPositions();\n    var callSoon = useCallSoon();\n    var getOriginalItemOrder = useGetOriginalItemOrder();\n    var _f = useDraggingPosition(), initiateDraggingPosition = _f.initiateDraggingPosition, resetDraggingPosition = _f.resetDraggingPosition, draggingItems = _f.draggingItems, getDraggingPosition = _f.getDraggingPosition, itemHeight = _f.itemHeight;\n    var resetProgrammaticDragIndexForCurrentTree = useCallback(function (viableDragPositions, draggingItems) {\n        var _a;\n        if (environment.activeTreeId &&\n            ((_a = environment.viewState[environment.activeTreeId]) === null || _a === void 0 ? void 0 : _a.focusedItem) &&\n            environment.linearItems &&\n            draggingItems) {\n            var focusItem_1 = environment.viewState[environment.activeTreeId].focusedItem;\n            var treeDragPositions = getViableDragPositions(environment.activeTreeId, draggingItems);\n            var newPos = treeDragPositions.findIndex(function (pos) {\n                if (pos.targetType === 'item') {\n                    return pos.targetItem === focusItem_1;\n                }\n                if (pos.targetType === 'between-items') {\n                    return (environment.items[pos.parentItem].children[pos.childIndex] ===\n                        focusItem_1);\n                }\n                return false;\n            });\n            if (newPos) {\n                setProgrammaticDragIndex(Math.min(newPos + 1, treeDragPositions.length - 1));\n            }\n            else {\n                setProgrammaticDragIndex(0);\n            }\n        }\n        else {\n            setProgrammaticDragIndex(0);\n        }\n    }, [\n        environment.activeTreeId,\n        environment.items,\n        environment.linearItems,\n        environment.viewState,\n        getViableDragPositions,\n    ]);\n    var resetState = useStableHandler(function () {\n        setIsProgrammaticallyDragging(false);\n        setViableDragPositions({});\n        setProgrammaticDragIndex(0);\n        setDraggingPosition(undefined);\n        resetDraggingPosition();\n    });\n    useSideEffect(function () {\n        if (environment.activeTreeId &&\n            environment.linearItems[environment.activeTreeId] &&\n            viableDragPositions[environment.activeTreeId]) {\n            resetProgrammaticDragIndexForCurrentTree(viableDragPositions[environment.activeTreeId], draggingItems);\n        }\n    }, [\n        draggingItems,\n        environment.activeTreeId,\n        environment.linearItems,\n        resetProgrammaticDragIndexForCurrentTree,\n        viableDragPositions,\n    ], [environment.activeTreeId]);\n    useSideEffect(function () {\n        if (isProgrammaticallyDragging && environment.activeTreeId) {\n            setDraggingPosition(viableDragPositions[environment.activeTreeId][programmaticDragIndex]);\n        }\n    }, [\n        programmaticDragIndex,\n        environment.activeTreeId,\n        isProgrammaticallyDragging,\n        viableDragPositions,\n    ], [programmaticDragIndex, environment.activeTreeId]);\n    var canDropAt = useCanDropAt();\n    var performDrag = function (draggingPosition) {\n        var _a;\n        if (draggingItems && !canDropAt(draggingPosition, draggingItems)) {\n            return;\n        }\n        setDraggingPosition(draggingPosition);\n        environment.setActiveTree(draggingPosition.treeId);\n        if (draggingItems && environment.activeTreeId !== draggingPosition.treeId) {\n            // TODO maybe do only if draggingItems are different to selectedItems\n            (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, draggingItems.map(function (item) { return item.index; }), draggingPosition.treeId);\n        }\n    };\n    var onDragOverTreeHandler = useStableHandler(function (e, treeId, containerRef) {\n        if (!draggingItems)\n            return;\n        var newDraggingPosition = getDraggingPosition(e, treeId, containerRef);\n        if (!newDraggingPosition)\n            return;\n        if (newDraggingPosition === 'invalid') {\n            setDraggingPosition(undefined);\n            return;\n        }\n        performDrag(newDraggingPosition);\n    });\n    var onDragLeaveContainerHandler = useStableHandler(function (e, containerRef) {\n        if (!containerRef.current)\n            return;\n        if (isOutsideOfContainer(e, containerRef.current.getBoundingClientRect())) {\n            setDraggingPosition(undefined);\n        }\n    });\n    var onDropHandler = useStableHandler(function () {\n        if (!draggingItems || !draggingPosition || !environment.onDrop) {\n            return;\n        }\n        environment.onDrop(draggingItems, draggingPosition);\n        callSoon(function () {\n            var _a;\n            (_a = environment.onFocusItem) === null || _a === void 0 ? void 0 : _a.call(environment, draggingItems[0], draggingPosition.treeId);\n            resetState();\n        });\n    });\n    var onStartDraggingItems = useCallback(function (items, treeId) {\n        var treeViableDragPositions = buildMapForTrees(environment.treeIds, function (treeId) { return getViableDragPositions(treeId, items); });\n        initiateDraggingPosition(treeId, items);\n        // TODO what if trees have different heights and drag target changes?\n        setViableDragPositions(treeViableDragPositions);\n        if (environment.activeTreeId) {\n            resetProgrammaticDragIndexForCurrentTree(treeViableDragPositions[environment.activeTreeId], items);\n        }\n    }, [\n        environment.activeTreeId,\n        environment.treeIds,\n        getViableDragPositions,\n        initiateDraggingPosition,\n        resetProgrammaticDragIndexForCurrentTree,\n    ]);\n    var startProgrammaticDrag = useCallback(function () {\n        var _a, _b, _c;\n        if (!environment.canDragAndDrop) {\n            return;\n        }\n        if (environment.activeTreeId) {\n            var draggingItems_1 = (_b = (_a = environment.viewState[environment.activeTreeId]) === null || _a === void 0 ? void 0 : _a.selectedItems) !== null && _b !== void 0 ? _b : [\n                (_c = environment.viewState[environment.activeTreeId]) === null || _c === void 0 ? void 0 : _c.focusedItem,\n            ];\n            if (draggingItems_1.length === 0 || draggingItems_1[0] === undefined) {\n                return;\n            }\n            var resolvedDraggingItems = getOriginalItemOrder(environment.activeTreeId, draggingItems_1.map(function (id) { return environment.items[id]; }));\n            if (environment.canDrag && !environment.canDrag(resolvedDraggingItems)) {\n                return;\n            }\n            onStartDraggingItems(resolvedDraggingItems, environment.activeTreeId);\n            setTimeout(function () {\n                setIsProgrammaticallyDragging(true);\n                // Needs to be done after onStartDraggingItems was called, so that viableDragPositions is populated\n            });\n        }\n    }, [environment, getOriginalItemOrder, onStartDraggingItems]);\n    var abortProgrammaticDrag = useCallback(function () {\n        resetState();\n    }, [resetState]);\n    var completeProgrammaticDrag = useCallback(function () {\n        onDropHandler();\n        resetState();\n    }, [onDropHandler, resetState]);\n    var programmaticDragUp = useCallback(function () {\n        setProgrammaticDragIndex(function (oldIndex) { return Math.max(0, oldIndex - 1); });\n    }, []);\n    var programmaticDragDown = useCallback(function () {\n        if (environment.activeTreeId) {\n            setProgrammaticDragIndex(function (oldIndex) {\n                return Math.min(viableDragPositions[environment.activeTreeId].length, oldIndex + 1);\n            });\n        }\n    }, [environment.activeTreeId, viableDragPositions]);\n    var dnd = useMemo(function () { return ({\n        onStartDraggingItems: onStartDraggingItems,\n        startProgrammaticDrag: startProgrammaticDrag,\n        abortProgrammaticDrag: abortProgrammaticDrag,\n        completeProgrammaticDrag: completeProgrammaticDrag,\n        programmaticDragUp: programmaticDragUp,\n        programmaticDragDown: programmaticDragDown,\n        draggingItems: draggingItems,\n        draggingPosition: draggingPosition,\n        itemHeight: itemHeight.current,\n        isProgrammaticallyDragging: isProgrammaticallyDragging,\n        onDragOverTreeHandler: onDragOverTreeHandler,\n        onDragLeaveContainerHandler: onDragLeaveContainerHandler,\n        viableDragPositions: viableDragPositions,\n    }); }, [\n        abortProgrammaticDrag,\n        completeProgrammaticDrag,\n        draggingItems,\n        draggingPosition,\n        isProgrammaticallyDragging,\n        itemHeight,\n        onDragOverTreeHandler,\n        onDragLeaveContainerHandler,\n        onStartDraggingItems,\n        programmaticDragDown,\n        programmaticDragUp,\n        startProgrammaticDrag,\n        viableDragPositions,\n    ]);\n    useEffect(function () {\n        window.addEventListener('dragend', resetState);\n        window.addEventListener('drop', onDropHandler);\n        return function () {\n            window.removeEventListener('dragend', resetState);\n            window.removeEventListener('drop', onDropHandler);\n        };\n    }, [onDropHandler, resetState]);\n    return (React.createElement(DragAndDropContext.Provider, { value: dnd }, children));\n};\n", "import { useCallback } from 'react';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nexport var useCanDropAt = function () {\n    var environment = useTreeEnvironment();\n    return useCallback(function (draggingPosition, draggingItems) {\n        if (draggingPosition.targetType === 'between-items') {\n            if (!environment.canReorderItems) {\n                return false;\n            }\n        }\n        else if (draggingPosition.targetType === 'root') {\n            if (!environment.canDropOnFolder) {\n                return false;\n            }\n        }\n        else {\n            var resolvedItem = environment.items[draggingPosition.targetItem];\n            if (!resolvedItem ||\n                (!environment.canDropOnFolder && resolvedItem.isFolder) ||\n                (!environment.canDropOnNonFolder && !resolvedItem.isFolder) ||\n                draggingItems.some(function (draggingItem) { return draggingItem.index === draggingPosition.targetItem; })) {\n                return false;\n            }\n        }\n        if (environment.canDropAt &&\n            (!draggingItems ||\n                !environment.canDropAt(draggingItems, draggingPosition))) {\n            // setDraggingPosition(undefined);\n            return false;\n        }\n        return true;\n    }, [environment]);\n};\n", "/* eslint-disable no-continue */\nimport { useCallback } from 'react';\nimport { useGetGetParentOfLinearItem } from './useGetParentOfLinearItem';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useCanDropAt } from './useCanDropAt';\nexport var useGetViableDragPositions = function () {\n    var environment = useTreeEnvironment();\n    var getParentOfLinearItem = useGetGetParentOfLinearItem();\n    var canDropAt = useCanDropAt();\n    var isDescendant = useCallback(function (treeId, itemLinearIndex, potentialParents) {\n        // based on DraggingPositionEvaluation.isDescendant()\n        var _a = getParentOfLinearItem(itemLinearIndex, treeId), parent = _a.parent, parentLinearIndex = _a.parentLinearIndex;\n        if (potentialParents.some(function (p) { return p.index === parent.item; }))\n            return true;\n        if (parent.depth === 0)\n            return false;\n        return isDescendant(treeId, parentLinearIndex, potentialParents);\n    }, [getParentOfLinearItem]);\n    return useCallback(function (treeId, draggingItems) {\n        var _a, _b;\n        var linearItems = environment.linearItems[treeId];\n        var targets = [];\n        var skipUntilDepthIsLowerThan = -1;\n        for (var linearIndex = 0; linearIndex < linearItems.length; \n        // eslint-disable-next-line no-plusplus\n        linearIndex++) {\n            var _c = linearItems[linearIndex], item = _c.item, depth = _c.depth;\n            if (skipUntilDepthIsLowerThan !== -1 &&\n                depth > skipUntilDepthIsLowerThan) {\n                continue;\n            }\n            else {\n                skipUntilDepthIsLowerThan = -1;\n            }\n            var parent_1 = getParentOfLinearItem(linearIndex, treeId).parent;\n            var childIndex = environment.items[parent_1.item].children.indexOf(item);\n            if (isDescendant(treeId, linearIndex, draggingItems)) {\n                skipUntilDepthIsLowerThan = depth + 1;\n                continue;\n            }\n            var itemPosition = {\n                targetType: 'item',\n                parentItem: parent_1.item,\n                targetItem: item,\n                linearIndex: linearIndex,\n                depth: depth,\n                treeId: treeId,\n            };\n            var topPosition = {\n                targetType: 'between-items',\n                parentItem: parent_1.item,\n                linePosition: 'top',\n                childIndex: childIndex,\n                depth: depth,\n                treeId: treeId,\n                linearIndex: linearIndex,\n            };\n            var bottomPosition = {\n                targetType: 'between-items',\n                parentItem: parent_1.item,\n                linePosition: 'bottom',\n                linearIndex: linearIndex + 1,\n                childIndex: childIndex + 1,\n                depth: depth,\n                treeId: treeId,\n            };\n            var skipTopPosition = depth === ((_b = (_a = linearItems[linearIndex - 1]) === null || _a === void 0 ? void 0 : _a.depth) !== null && _b !== void 0 ? _b : -1);\n            if (!skipTopPosition && canDropAt(topPosition, draggingItems)) {\n                targets.push(topPosition);\n            }\n            if (canDropAt(itemPosition, draggingItems)) {\n                targets.push(itemPosition);\n            }\n            if (canDropAt(bottomPosition, draggingItems)) {\n                targets.push(bottomPosition);\n            }\n        }\n        return targets;\n    }, [\n        canDropAt,\n        environment.items,\n        environment.linearItems,\n        getParentOfLinearItem,\n        isDescendant,\n    ]);\n};\n", "import { useCallback } from 'react';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nexport var useGetGetParentOfLinearItem = function () {\n    var environment = useTreeEnvironment();\n    return useCallback(function (itemLinearIndex, treeId) {\n        var linearItems = environment.linearItems[treeId];\n        var depth = linearItems[itemLinearIndex].depth;\n        var parentLinearIndex = itemLinearIndex;\n        for (; !!linearItems[parentLinearIndex] &&\n            linearItems[parentLinearIndex].depth !== depth - 1; parentLinearIndex -= 1)\n            ;\n        var parent = linearItems[parentLinearIndex];\n        if (!parent) {\n            parent = { item: environment.trees[treeId].rootItem, depth: 0 };\n            parentLinearIndex = 0;\n        }\n        return { parent: parent, parentLinearIndex: parentLinearIndex };\n    }, [environment.linearItems, environment.trees]);\n};\n", "var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useEffect, useRef } from 'react';\nexport var useSideEffect = function (effect, deps, changeOn) {\n    var previousRef = useRef();\n    useEffect(function () {\n        if (!previousRef.current) {\n            previousRef.current = __spreadArray([], changeOn, true);\n            effect();\n        }\n        else {\n            var changed = previousRef.current.some(function (v, i) { return v !== changeOn[i]; });\n            if (changed) {\n                previousRef.current = __spreadArray([], changeOn, true);\n                effect();\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, __spreadArray(__spreadArray([], deps, true), changeOn, true));\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexport var buildMapForTrees = function (treeIds, build) {\n    return treeIds\n        .map(function (id) { return [id, build(id)]; })\n        .reduce(function (a, _a) {\n        var _b;\n        var id = _a[0], obj = _a[1];\n        return (__assign(__assign({}, a), (_b = {}, _b[id] = obj, _b)));\n    }, {});\n};\nexport var getDocument = function () {\n    return typeof document !== 'undefined' ? document : undefined;\n};\n", "import { useCallback, useEffect, useRef } from 'react';\n/**\n * React hook that schedules a callback to be run \"soon\" and will cancel the\n * callback if it is still pending when the component is unmounted.\n *\n * @returns A function that can be used to schedule a deferred callback.\n */\nexport function useCallSoon(dontClean) {\n    if (dontClean === void 0) { dontClean = false; }\n    var handleRef = useRef(new Array());\n    useEffect(function () {\n        if (dontClean) {\n            return function () { };\n        }\n        var handles = handleRef.current;\n        return function () { return handles.forEach(function (handle) { return cancelAnimationFrame(handle); }); };\n    }, [dontClean, handleRef]);\n    return useCallback(function (callback) {\n        var handle = requestAnimationFrame(function () {\n            handleRef.current.splice(handleRef.current.indexOf(handle), 1);\n            callback();\n        });\n        handleRef.current.push(handle);\n    }, [handleRef]);\n}\n", "import { useCallback } from 'react';\nimport { useRefCopy } from './useRefCopy';\nexport var useStableHandler = function (handler) {\n    var handlerRef = useRefCopy(handler);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return useCallback((function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return handlerRef.current.apply(handlerRef, args);\n    }), [\n        handlerRef,\n    ]);\n};\n", "import { useRef } from 'react';\nexport var useRefCopy = function (value) {\n    var ref = useRef(value);\n    ref.current = value;\n    return ref;\n};\n", "import { useTreeEnvironment } from './controlledEnvironment/ControlledTreeEnvironment';\nimport { useStableHandler } from './useStableHandler';\nexport var useGetOriginalItemOrder = function () {\n    var env = useTreeEnvironment();\n    return useStableHandler(function (treeId, items) {\n        return items\n            .map(function (item) {\n            return [\n                item,\n                env.linearItems[treeId].findIndex(function (linearItem) { return linearItem.item === item.index; }),\n            ];\n        })\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            .sort(function (_a, _b) {\n            var _ = _a[0], aPos = _a[1];\n            var _2 = _b[0], bPos = _b[1];\n            return aPos - bPos;\n        })\n            .map(function (_a) {\n            var item = _a[0];\n            return item;\n        });\n    });\n};\n", "import { useRef, useState } from 'react';\nimport { computeItemHeight, isOutsideOfContainer, } from '../controlledEnvironment/layoutUtils';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useStableHandler } from '../useStableHandler';\nimport { DraggingPositionEvaluation } from './DraggingPositionEvaluation';\nimport { useGetGetParentOfLinearItem } from './useGetParentOfLinearItem';\nexport var useDraggingPosition = function () {\n    var dragCode = useRef('initial');\n    var _a = useState(undefined), draggingItems = _a[0], setDraggingItems = _a[1];\n    var itemHeight = useRef(0);\n    var env = useTreeEnvironment();\n    var getParentOfLinearItem = useGetGetParentOfLinearItem();\n    var isNewDragPosition = useStableHandler(function (e, treeId, hoveringPosition) {\n        if (!hoveringPosition) {\n            return false;\n        }\n        var offset = hoveringPosition.offset, linearIndex = hoveringPosition.linearIndex;\n        var newDragCode = \"\".concat(treeId, \"__\").concat(linearIndex, \"__\").concat(offset !== null && offset !== void 0 ? offset : '', \"__\").concat(hoveringPosition.indentation);\n        if (newDragCode !== dragCode.current) {\n            dragCode.current = newDragCode;\n            return true;\n        }\n        return false;\n    });\n    /**\n     * Returns undefined for invalid drop targets, like outside the tree.\n     */\n    var getHoveringPosition = useStableHandler(function (e, treeId, containerRef) {\n        if (!containerRef.current) {\n            return undefined;\n        }\n        var treeBb = containerRef.current.getBoundingClientRect();\n        if (isOutsideOfContainer(e, treeBb)) {\n            return undefined;\n        }\n        var hoveringPosition = (e.clientY - treeBb.top) / itemHeight.current;\n        var treeLinearItems = env.linearItems[treeId];\n        var linearIndex = Math.min(Math.max(0, Math.floor(hoveringPosition)), treeLinearItems.length - 1);\n        if (treeLinearItems.length === 0) {\n            return {\n                linearIndex: 0,\n                offset: 'bottom',\n                indentation: 0,\n            };\n        }\n        var targetLinearItem = treeLinearItems[linearIndex];\n        var targetItem = env.items[targetLinearItem.item];\n        var indentation = !env.renderDepthOffset\n            ? undefined\n            : Math.max(Math.floor((e.clientX - treeBb.left) / env.renderDepthOffset), 0);\n        var offset;\n        var lineThreshold = !env.canReorderItems\n            ? 0\n            : ((targetItem === null || targetItem === void 0 ? void 0 : targetItem.isFolder) && env.canDropOnFolder) ||\n                env.canDropOnNonFolder\n                ? 0.2\n                : 0.5;\n        if (hoveringPosition - 0.5 >= treeLinearItems.length - 1) {\n            // very bottom, always use offset \"bottom\"\n            offset = 'bottom';\n        }\n        else if (hoveringPosition % 1 < lineThreshold) {\n            offset = 'top';\n        }\n        else if (hoveringPosition % 1 > 1 - lineThreshold) {\n            offset = 'bottom';\n        }\n        return { linearIndex: linearIndex, offset: offset, indentation: indentation };\n    });\n    // returning undefined means calling onDragAtPosition(undefined), returning a dropposition means calling onPerformDrag(dropposition)\n    // TODO old function sometimes returned undefined when old state could be kept; is it okay to also return undefined to enter invalid drop state here? e.g. !this.draggingItems, !canDragAndDrop...\n    var getDraggingPosition = useStableHandler(function (e, treeId, containerRef) {\n        var hoveringPosition = getHoveringPosition(e, treeId, containerRef);\n        if (!isNewDragPosition(e, treeId, hoveringPosition)) {\n            return undefined;\n        }\n        if (!draggingItems ||\n            !env.canDragAndDrop ||\n            !hoveringPosition ||\n            e.clientX < 0 ||\n            e.clientY < 0) {\n            return 'invalid';\n        }\n        return new DraggingPositionEvaluation(env, e, treeId, hoveringPosition, draggingItems, getParentOfLinearItem).getDraggingPosition();\n    });\n    var initiateDraggingPosition = useStableHandler(function (treeId, items) {\n        setDraggingItems(items);\n        dragCode.current = 'initial';\n        itemHeight.current = computeItemHeight(treeId);\n    });\n    var resetDraggingPosition = useStableHandler(function () {\n        setDraggingItems(undefined);\n        dragCode.current = 'initial';\n        itemHeight.current = 0;\n    });\n    return {\n        initiateDraggingPosition: initiateDraggingPosition,\n        resetDraggingPosition: resetDraggingPosition,\n        draggingItems: draggingItems,\n        getDraggingPosition: getDraggingPosition,\n        itemHeight: itemHeight,\n    };\n};\n", "import { getDocument } from '../utils';\nexport var computeItemHeight = function (treeId) {\n    var _a;\n    var firstItem = (_a = getDocument()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-container=\\\"true\\\"]\"));\n    if (firstItem) {\n        var style = getComputedStyle(firstItem);\n        // top margin flows into the bottom margin of the previous item, so ignore it\n        return (firstItem.offsetHeight +\n            Math.max(parseFloat(style.marginTop), parseFloat(style.marginBottom)));\n    }\n    return 5;\n};\nexport var isOutsideOfContainer = function (e, treeBb) {\n    return e.clientX <= treeBb.left ||\n        e.clientX >= treeBb.right ||\n        e.clientY <= treeBb.top ||\n        e.clientY >= treeBb.bottom;\n};\n", "var DraggingPositionEvaluation = /** @class */ (function () {\n    function DraggingPositionEvaluation(env, e, treeId, hoveringPosition, draggingItems, getParentOfLinearItem) {\n        this.env = env;\n        this.e = e;\n        this.treeId = treeId;\n        this.linearIndex = hoveringPosition.linearIndex;\n        this.offset = hoveringPosition.offset;\n        this.indentation = hoveringPosition.indentation;\n        this.targetItem = this.env.linearItems[this.treeId][this.linearIndex];\n        this.getParentOfLinearItem = getParentOfLinearItem;\n        this.draggingItems = draggingItems;\n    }\n    DraggingPositionEvaluation.prototype.getEmptyTreeDragPosition = function () {\n        return {\n            targetType: 'root',\n            treeId: this.treeId,\n            depth: 0,\n            linearIndex: 0,\n            targetItem: this.env.trees[this.treeId].rootItem,\n        };\n    };\n    /**\n     * If reordering is not allowed, dragging on non-folder items redirects\n     * the drag target to the parent of the target item.\n     */\n    DraggingPositionEvaluation.prototype.maybeRedirectToParent = function () {\n        var redirectTargetToParent = !this.env.canReorderItems &&\n            !this.env.canDropOnNonFolder &&\n            !this.env.items[this.targetItem.item].isFolder;\n        if (redirectTargetToParent) {\n            var _a = this.getParentOfLinearItem(this.linearIndex, this.treeId), parentLinearIndex = _a.parentLinearIndex, parent_1 = _a.parent;\n            this.targetItem = parent_1;\n            this.linearIndex = parentLinearIndex;\n        }\n    };\n    /**\n     * If the item is the last in a group, and the drop is at the bottom,\n     * the x-coordinate of the mouse allows to reparent upwards.\n     */\n    DraggingPositionEvaluation.prototype.maybeReparentUpwards = function () {\n        var _a, _b;\n        if (this.indentation === undefined) {\n            return undefined;\n        }\n        var treeLinearItems = this.env.linearItems[this.treeId];\n        var deepestDepth = treeLinearItems[this.linearIndex].depth;\n        // Default to zero on last position to allow dropping on root when\n        // dropping at bottom\n        var legalDropDepthCount = // itemDepthDifferenceToNextItem/isLastInGroup\n         deepestDepth - ((_b = (_a = treeLinearItems[this.linearIndex + 1]) === null || _a === void 0 ? void 0 : _a.depth) !== null && _b !== void 0 ? _b : 0);\n        var canReparentUpwards = this.offset === 'bottom' && legalDropDepthCount > 0;\n        if (!canReparentUpwards) {\n            return undefined;\n        }\n        var droppingIndent = Math.max(deepestDepth - legalDropDepthCount, this.indentation);\n        var newParent = {\n            parentLinearIndex: this.linearIndex,\n            parent: this.targetItem,\n        };\n        var insertionItemAbove;\n        for (var i = deepestDepth; i >= droppingIndent; i -= 1) {\n            insertionItemAbove = newParent;\n            newParent = this.getParentOfLinearItem(newParent.parentLinearIndex, this.treeId);\n        }\n        if (this.indentation === treeLinearItems[this.linearIndex].depth) {\n            return undefined;\n        }\n        if (!insertionItemAbove) {\n            return undefined;\n        }\n        var reparentedChildIndex = this.env.items[newParent.parent.item].children.indexOf(insertionItemAbove.parent.item) + 1;\n        if (this.draggingItems &&\n            this.isDescendant(this.treeId, newParent.parentLinearIndex + 1, this.draggingItems)) {\n            return undefined;\n        }\n        return {\n            targetType: 'between-items',\n            treeId: this.treeId,\n            parentItem: newParent.parent.item,\n            depth: droppingIndent,\n            linearIndex: this.linearIndex + 1,\n            childIndex: reparentedChildIndex,\n            linePosition: 'bottom',\n        };\n    };\n    /**\n     * Don't allow to drop at bottom of an open folder, since that will place\n     * it visually at a different position. Redirect the drag target to the\n     * top of the folder contents in that case.\n     */\n    DraggingPositionEvaluation.prototype.maybeRedirectInsideOpenFolder = function () {\n        var nextItem = this.env.linearItems[this.treeId][this.linearIndex + 1];\n        var redirectInsideOpenFolder = !this.env.canDropBelowOpenFolders &&\n            nextItem &&\n            this.targetItem.depth === nextItem.depth - 1 &&\n            this.offset === 'bottom';\n        if (redirectInsideOpenFolder) {\n            this.targetItem = nextItem;\n            this.linearIndex += 1;\n            this.offset = 'top';\n        }\n    };\n    /**\n     * Inside a folder, only drop at bottom offset to make it visually\n     * consistent. This also maps to bottom offset for items below open\n     * subtrees, to keep the x-coordinate based dropping consistent (only\n     * if indentation is defined).\n     */\n    DraggingPositionEvaluation.prototype.maybeMapToBottomOffset = function () {\n        var priorItem = this.env.linearItems[this.treeId][this.linearIndex - 1];\n        if (!priorItem || (priorItem === null || priorItem === void 0 ? void 0 : priorItem.depth) === undefined)\n            return;\n        var depthDistanceToPrior = priorItem.depth - this.targetItem.depth;\n        if (this.offset === 'top' &&\n            (depthDistanceToPrior === 0 ||\n                (depthDistanceToPrior > 0 && this.indentation !== undefined))) {\n            this.offset = 'bottom';\n            this.linearIndex -= 1;\n            this.targetItem = this.env.linearItems[this.treeId][this.linearIndex];\n        }\n    };\n    DraggingPositionEvaluation.prototype.canDropAtCurrentTarget = function () {\n        var _this = this;\n        var _a;\n        var targetItemData = this.env.items[this.targetItem.item];\n        if (!this.offset &&\n            !this.env.canDropOnNonFolder &&\n            !targetItemData.isFolder) {\n            return false;\n        }\n        if (!this.offset && !this.env.canDropOnFolder && targetItemData.isFolder) {\n            return false;\n        }\n        if (this.offset && !this.env.canReorderItems) {\n            return false;\n        }\n        if ((_a = this.draggingItems) === null || _a === void 0 ? void 0 : _a.some(function (draggingItem) { return draggingItem.index === _this.targetItem.item; })) {\n            return false;\n        }\n        return true;\n    };\n    DraggingPositionEvaluation.prototype.getDraggingPosition = function () {\n        if (this.env.linearItems[this.treeId].length === 0) {\n            return this.getEmptyTreeDragPosition();\n        }\n        if (!this.draggingItems ||\n            this.linearIndex < 0 ||\n            this.linearIndex >= this.env.linearItems[this.treeId].length) {\n            return undefined;\n        }\n        this.maybeRedirectToParent();\n        this.maybeRedirectInsideOpenFolder();\n        this.maybeMapToBottomOffset();\n        var reparented = this.maybeReparentUpwards();\n        if (reparented) {\n            return reparented;\n        }\n        if (this.areDraggingItemsDescendantOfTarget()) {\n            return 'invalid';\n        }\n        if (!this.canDropAtCurrentTarget()) {\n            return 'invalid';\n        }\n        var parent = this.getParentOfLinearItem(this.linearIndex, this.treeId).parent;\n        var newChildIndex = this.env.items[parent.item].children.indexOf(this.targetItem.item) +\n            (this.offset === 'top' ? 0 : 1);\n        if (this.offset) {\n            return {\n                targetType: 'between-items',\n                treeId: this.treeId,\n                parentItem: parent.item,\n                depth: this.targetItem.depth,\n                linearIndex: this.linearIndex + (this.offset === 'top' ? 0 : 1),\n                childIndex: newChildIndex,\n                linePosition: this.offset,\n            };\n        }\n        return {\n            targetType: 'item',\n            treeId: this.treeId,\n            parentItem: parent.item,\n            targetItem: this.targetItem.item,\n            depth: this.targetItem.depth,\n            linearIndex: this.linearIndex,\n        };\n    };\n    DraggingPositionEvaluation.prototype.isDescendant = function (treeId, itemLinearIndex, potentialParents) {\n        // console.log('descendant check', itemLinearIndex, potentialParents);\n        var _a = this.getParentOfLinearItem(itemLinearIndex, treeId), parentLinearIndex = _a.parentLinearIndex, parent = _a.parent;\n        if (potentialParents.some(function (p) { return p.index === parent.item; })) {\n            return true;\n        }\n        if (parent.depth === 0) {\n            return false;\n        }\n        return this.isDescendant(treeId, parentLinearIndex, potentialParents);\n    };\n    DraggingPositionEvaluation.prototype.areDraggingItemsDescendantOfTarget = function () {\n        return (this.draggingItems &&\n            this.isDescendant(this.treeId, this.linearIndex, this.draggingItems));\n    };\n    return DraggingPositionEvaluation;\n}());\nexport { DraggingPositionEvaluation };\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport * as React from 'react';\nimport { useCallback, useMemo } from 'react';\nimport { useDragAndDrop } from '../drag/DragAndDropProvider';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useCreatedEnvironmentRef } from './useCreatedEnvironmentRef';\nimport { useRefCopy } from '../useRefCopy';\nimport { waitFor } from '../waitFor';\nvar EnvironmentActionsContext = React.createContext(null);\nexport var useEnvironmentActions = function () {\n    return React.useContext(EnvironmentActionsContext);\n};\nvar recursiveExpand = function (itemId, items, onExpand) { return __awaiter(void 0, void 0, void 0, function () {\n    var _loop_1, _i, _a, childId;\n    var _b, _c, _d;\n    return __generator(this, function (_e) {\n        _loop_1 = function (childId) {\n            waitFor(function () { var _a; return !!((_a = items.current) === null || _a === void 0 ? void 0 : _a[childId]); }).then(function () {\n                var _a;\n                var item = (_a = items.current) === null || _a === void 0 ? void 0 : _a[childId];\n                if (item === null || item === void 0 ? void 0 : item.isFolder) {\n                    onExpand(item);\n                    recursiveExpand(childId, items, onExpand);\n                }\n            });\n        };\n        for (_i = 0, _a = (_d = (_c = (_b = items.current) === null || _b === void 0 ? void 0 : _b[itemId]) === null || _c === void 0 ? void 0 : _c.children) !== null && _d !== void 0 ? _d : []; _i < _a.length; _i++) {\n            childId = _a[_i];\n            _loop_1(childId);\n        }\n        return [2 /*return*/];\n    });\n}); };\nexport var EnvironmentActionsProvider = React.forwardRef(function (props, ref) {\n    var _a = useTreeEnvironment(), onCollapseItem = _a.onCollapseItem, items = _a.items, trees = _a.trees, viewState = _a.viewState, onExpandItem = _a.onExpandItem, onFocusItem = _a.onFocusItem, setActiveTree = _a.setActiveTree, onRenameItem = _a.onRenameItem, onSelectItems = _a.onSelectItems, onPrimaryAction = _a.onPrimaryAction, linearItems = _a.linearItems;\n    var _b = useDragAndDrop(), abortProgrammaticDrag = _b.abortProgrammaticDrag, completeProgrammaticDrag = _b.completeProgrammaticDrag, programmaticDragDown = _b.programmaticDragDown, programmaticDragUp = _b.programmaticDragUp, startProgrammaticDrag = _b.startProgrammaticDrag;\n    var itemsRef = useRefCopy(items);\n    // TODO replace callbacks with stable handlers\n    var collapseItem = useCallback(function (itemId, treeId) {\n        onCollapseItem === null || onCollapseItem === void 0 ? void 0 : onCollapseItem(items[itemId], treeId);\n    }, [items, onCollapseItem]);\n    var expandItem = useCallback(function (itemId, treeId) {\n        onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(items[itemId], treeId);\n    }, [items, onExpandItem]);\n    var focusItem = useCallback(function (itemId, treeId, setDomFocus) {\n        if (setDomFocus === void 0) { setDomFocus = true; }\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(items[itemId], treeId, setDomFocus);\n    }, [items, onFocusItem]);\n    var focusTree = useCallback(function (treeId, autoFocus) {\n        if (autoFocus === void 0) { autoFocus = true; }\n        setActiveTree(treeId, autoFocus);\n    }, [setActiveTree]);\n    var moveFocusDown = useCallback(function (treeId) {\n        var treeLinearItems = linearItems[treeId];\n        var currentFocusIndex = treeLinearItems.findIndex(function (_a) {\n            var _b;\n            var item = _a.item;\n            return item === ((_b = viewState[treeId]) === null || _b === void 0 ? void 0 : _b.focusedItem);\n        });\n        var newIndex = currentFocusIndex !== undefined\n            ? Math.min(treeLinearItems.length - 1, currentFocusIndex + 1)\n            : 0;\n        var newItem = items[treeLinearItems[newIndex].item];\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(newItem, treeId);\n    }, [items, linearItems, onFocusItem, viewState]);\n    var moveFocusUp = useCallback(function (treeId) {\n        var treeLinearItems = linearItems[treeId];\n        var currentFocusIndex = treeLinearItems.findIndex(function (_a) {\n            var _b;\n            var item = _a.item;\n            return item === ((_b = viewState[treeId]) === null || _b === void 0 ? void 0 : _b.focusedItem);\n        });\n        var newIndex = currentFocusIndex !== undefined\n            ? Math.max(0, currentFocusIndex - 1)\n            : 0;\n        var newItem = items[treeLinearItems[newIndex].item];\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(newItem, treeId);\n    }, [items, linearItems, onFocusItem, viewState]);\n    var renameItem = useCallback(function (itemId, name, treeId) {\n        onRenameItem === null || onRenameItem === void 0 ? void 0 : onRenameItem(items[itemId], name, treeId);\n    }, [items, onRenameItem]);\n    var selectItems = useCallback(function (itemsIds, treeId) {\n        onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems(itemsIds, treeId);\n    }, [onSelectItems]);\n    var toggleItemExpandedState = useCallback(function (itemId, treeId) {\n        var _a, _b;\n        if ((_b = (_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.expandedItems) === null || _b === void 0 ? void 0 : _b.includes(itemId)) {\n            onCollapseItem === null || onCollapseItem === void 0 ? void 0 : onCollapseItem(items[itemId], treeId);\n        }\n        else {\n            onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(items[itemId], treeId);\n        }\n    }, [items, onCollapseItem, onExpandItem, viewState]);\n    var toggleItemSelectStatus = useCallback(function (itemId, treeId) {\n        var _a, _b, _c, _d, _e;\n        if ((_b = (_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.selectedItems) === null || _b === void 0 ? void 0 : _b.includes(itemId)) {\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems((_d = (_c = viewState[treeId].selectedItems) === null || _c === void 0 ? void 0 : _c.filter(function (item) { return item !== itemId; })) !== null && _d !== void 0 ? _d : [], treeId);\n        }\n        else {\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems(__spreadArray(__spreadArray([], ((_e = viewState[treeId].selectedItems) !== null && _e !== void 0 ? _e : []), true), [itemId], false), treeId);\n        }\n    }, [onSelectItems, viewState]);\n    var invokePrimaryAction = useCallback(function (itemId, treeId) {\n        onPrimaryAction === null || onPrimaryAction === void 0 ? void 0 : onPrimaryAction(items[itemId], treeId);\n    }, [items, onPrimaryAction]);\n    var expandSubsequently = useCallback(function (treeId, itemIds) { return __awaiter(void 0, void 0, void 0, function () {\n        var current, rest;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    current = itemIds[0], rest = itemIds.slice(1);\n                    return [4 /*yield*/, waitFor(function () { var _a; return !!((_a = itemsRef.current) === null || _a === void 0 ? void 0 : _a[current]); }).then(function () {\n                            var item = itemsRef.current[current];\n                            if (!item) {\n                                return Promise.resolve();\n                            }\n                            onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(item, treeId);\n                            if (rest.length > 0) {\n                                return expandSubsequently(treeId, rest);\n                            }\n                            return Promise.resolve();\n                        })];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [itemsRef, onExpandItem]);\n    var expandAll = useCallback(function (treeId) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, recursiveExpand(trees[treeId].rootItem, itemsRef, function (item) {\n                        return onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(item, treeId);\n                    })];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [itemsRef, onExpandItem, trees]);\n    var collapseAll = useCallback(function (treeId) {\n        var _a, _b;\n        for (var _i = 0, _c = (_b = (_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.expandedItems) !== null && _b !== void 0 ? _b : []; _i < _c.length; _i++) {\n            var itemId = _c[_i];\n            onCollapseItem === null || onCollapseItem === void 0 ? void 0 : onCollapseItem(items[itemId], treeId);\n        }\n    }, [items, onCollapseItem, viewState]);\n    // TODO change environment childs to use actions rather than output events where possible\n    var actions = useMemo(function () { return ({\n        collapseItem: collapseItem,\n        expandItem: expandItem,\n        focusItem: focusItem,\n        focusTree: focusTree,\n        moveFocusDown: moveFocusDown,\n        moveFocusUp: moveFocusUp,\n        renameItem: renameItem,\n        selectItems: selectItems,\n        toggleItemExpandedState: toggleItemExpandedState,\n        toggleItemSelectStatus: toggleItemSelectStatus,\n        invokePrimaryAction: invokePrimaryAction,\n        expandAll: expandAll,\n        expandSubsequently: expandSubsequently,\n        collapseAll: collapseAll,\n        abortProgrammaticDrag: abortProgrammaticDrag,\n        completeProgrammaticDrag: completeProgrammaticDrag,\n        moveProgrammaticDragPositionDown: programmaticDragDown,\n        moveProgrammaticDragPositionUp: programmaticDragUp,\n        startProgrammaticDrag: startProgrammaticDrag,\n    }); }, [\n        collapseItem,\n        expandItem,\n        focusItem,\n        focusTree,\n        moveFocusDown,\n        moveFocusUp,\n        renameItem,\n        selectItems,\n        toggleItemExpandedState,\n        toggleItemSelectStatus,\n        invokePrimaryAction,\n        expandAll,\n        expandSubsequently,\n        collapseAll,\n        abortProgrammaticDrag,\n        completeProgrammaticDrag,\n        programmaticDragDown,\n        programmaticDragUp,\n        startProgrammaticDrag,\n    ]);\n    useCreatedEnvironmentRef(ref, actions);\n    return (React.createElement(EnvironmentActionsContext.Provider, { value: actions }, props.children));\n});\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useImperativeHandle } from 'react';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useDragAndDrop } from '../drag/DragAndDropProvider';\nexport var useCreatedEnvironmentRef = function (ref, actions) {\n    var environment = useTreeEnvironment();\n    var dnd = useDragAndDrop();\n    useImperativeHandle(ref, function () { return (__assign(__assign(__assign({}, actions), environment), { treeEnvironmentContext: environment, dragAndDropContext: dnd })); });\n};\n", "export var waitFor = function (check, intervalMs, timeoutMs) {\n    if (intervalMs === void 0) { intervalMs = 50; }\n    if (timeoutMs === void 0) { timeoutMs = 10000; }\n    return new Promise(function (resolve) {\n        if (check()) {\n            resolve();\n        }\n        var complete;\n        var interval = setInterval(function () {\n            if (check()) {\n                complete();\n            }\n        }, intervalMs);\n        var timeout = setTimeout(function () {\n            complete();\n        }, timeoutMs);\n        complete = function () {\n            clearInterval(interval);\n            clearTimeout(timeout);\n            resolve();\n        };\n    });\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useCallback, useMemo, useState } from 'react';\nimport { scrollIntoView } from '../tree/scrollIntoView';\nimport { useRenderers } from '../renderers/useRenderers';\nimport { buildMapForTrees, getDocument } from '../utils';\nimport { getItemsLinearly } from '../tree/getItemsLinearly';\nimport { useRefCopy } from '../useRefCopy';\nexport var useControlledTreeEnvironmentProps = function (_a) {\n    var onExpandItemProp = _a.onExpandItem, onCollapseProp = _a.onCollapseItem, onDropProp = _a.onDrop, props = __rest(_a, [\"onExpandItem\", \"onCollapseItem\", \"onDrop\"]);\n    var _b = useState({}), trees = _b[0], setTrees = _b[1];\n    var _c = useState(), activeTreeId = _c[0], setActiveTreeId = _c[1];\n    var treeIds = useMemo(function () { return Object.keys(trees); }, [trees]);\n    var onFocusItem = props.onFocusItem, autoFocus = props.autoFocus, onRegisterTree = props.onRegisterTree, onUnregisterTree = props.onUnregisterTree, items = props.items, viewState = props.viewState;\n    var onFocusItemRef = useRefCopy(onFocusItem);\n    var viewStateRef = useRefCopy(viewState);\n    var linearItems = useMemo(function () {\n        return buildMapForTrees(treeIds, function (treeId) { var _a; return getItemsLinearly(trees[treeId].rootItem, (_a = viewState[treeId]) !== null && _a !== void 0 ? _a : {}, items); });\n    }, [trees, items, treeIds, viewState]);\n    var onFocusItemHandler = useCallback(function (item, treeId, setDomFocus) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (setDomFocus === void 0) { setDomFocus = true; }\n        if ((autoFocus !== null && autoFocus !== void 0 ? autoFocus : true) && setDomFocus) {\n            var newItem = (_b = (_a = getDocument()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-id=\\\"\").concat(item.index, \"\\\"]\"))) !== null && _b !== void 0 ? _b : (_c = getDocument()) === null || _c === void 0 ? void 0 : _c.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-id]\"));\n            if (((_f = (_e = (_d = getDocument()) === null || _d === void 0 ? void 0 : _d.activeElement) === null || _e === void 0 ? void 0 : _e.attributes.getNamedItem('data-rct-search-input')) === null || _f === void 0 ? void 0 : _f.value) !== 'true') {\n                // Move DOM focus to item if the current focus is not on the search input\n                (_g = newItem === null || newItem === void 0 ? void 0 : newItem.focus) === null || _g === void 0 ? void 0 : _g.call(newItem);\n            }\n            else {\n                // Otherwise just manually scroll into view\n                scrollIntoView(newItem);\n            }\n        }\n        if (((_h = viewStateRef.current[treeId]) === null || _h === void 0 ? void 0 : _h.focusedItem) === item.index) {\n            return;\n        }\n        (_j = onFocusItemRef.current) === null || _j === void 0 ? void 0 : _j.call(onFocusItemRef, item, treeId);\n    }, [autoFocus, onFocusItemRef, viewStateRef]);\n    var registerTree = useCallback(function (tree) {\n        setTrees(function (trees) {\n            var _a;\n            return (__assign(__assign({}, trees), (_a = {}, _a[tree.treeId] = tree, _a)));\n        });\n        onRegisterTree === null || onRegisterTree === void 0 ? void 0 : onRegisterTree(tree);\n    }, [onRegisterTree]);\n    var unregisterTree = useCallback(function (treeId) {\n        onUnregisterTree === null || onUnregisterTree === void 0 ? void 0 : onUnregisterTree(trees[treeId]);\n        delete trees[treeId];\n        setTrees(trees);\n    }, [onUnregisterTree, trees]);\n    var onCollapseItem = useCallback(function (item, treeId) {\n        onCollapseProp === null || onCollapseProp === void 0 ? void 0 : onCollapseProp(item, treeId);\n        setTrees(function (trees) { return trees; });\n    }, [onCollapseProp]);\n    var onExpandItem = useCallback(function (item, treeId) {\n        onExpandItemProp === null || onExpandItemProp === void 0 ? void 0 : onExpandItemProp(item, treeId);\n        setTrees(function (trees) { return trees; });\n    }, [onExpandItemProp]);\n    var onDrop = useCallback(function (items, target) {\n        onDropProp === null || onDropProp === void 0 ? void 0 : onDropProp(items, target);\n        setTrees(function (trees) { return trees; });\n    }, [onDropProp]);\n    var focusTree = useCallback(function (treeId) {\n        var _a, _b;\n        var focusItem = (_a = getDocument()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-focus=\\\"true\\\"]\"));\n        (_b = focusItem === null || focusItem === void 0 ? void 0 : focusItem.focus) === null || _b === void 0 ? void 0 : _b.call(focusItem);\n    }, []);\n    var setActiveTree = useCallback(function (treeIdOrSetStateFunction, autoFocusTree) {\n        if (autoFocusTree === void 0) { autoFocusTree = true; }\n        var maybeFocusTree = function (treeId) {\n            var _a, _b;\n            if (autoFocusTree &&\n                (autoFocus !== null && autoFocus !== void 0 ? autoFocus : true) &&\n                treeId &&\n                !((_b = (_a = getDocument()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"]\"))) === null || _b === void 0 ? void 0 : _b.contains(document.activeElement))) {\n                focusTree(treeId);\n            }\n        };\n        if (typeof treeIdOrSetStateFunction === 'function') {\n            setActiveTreeId(function (oldValue) {\n                var treeId = treeIdOrSetStateFunction(oldValue);\n                if (treeId !== oldValue) {\n                    maybeFocusTree(treeId);\n                }\n                return treeId;\n            });\n        }\n        else {\n            var treeId = treeIdOrSetStateFunction;\n            setActiveTreeId(treeId);\n            maybeFocusTree(treeId);\n        }\n    }, [autoFocus, focusTree]);\n    var renderers = useRenderers(props);\n    return __assign(__assign(__assign({}, renderers), props), { onFocusItem: onFocusItemHandler, registerTree: registerTree, unregisterTree: unregisterTree, onExpandItem: onExpandItem, onCollapseItem: onCollapseItem, onDrop: onDrop, setActiveTree: setActiveTree, treeIds: treeIds, trees: trees, activeTreeId: activeTreeId, linearItems: linearItems });\n};\n", "import { getDocument } from '../utils';\nexport var scrollIntoView = function (element) {\n    var _a, _b, _c, _d;\n    if (!element) {\n        return;\n    }\n    if (element.scrollIntoViewIfNeeded) {\n        element.scrollIntoViewIfNeeded();\n    }\n    else {\n        var boundingBox = element.getBoundingClientRect();\n        var isElementInViewport = boundingBox.top >= 0 &&\n            boundingBox.left >= 0 &&\n            boundingBox.bottom <=\n                (window.innerHeight ||\n                    !!((_b = (_a = getDocument()) === null || _a === void 0 ? void 0 : _a.documentElement) === null || _b === void 0 ? void 0 : _b.clientHeight)) &&\n            boundingBox.right <=\n                (window.innerWidth || !!((_d = (_c = getDocument()) === null || _c === void 0 ? void 0 : _c.documentElement) === null || _d === void 0 ? void 0 : _d.clientWidth));\n        if (!isElementInViewport) {\n            element.scrollIntoView();\n        }\n    }\n};\n", "import { useMemo } from 'react';\nimport { createDefaultRenderers } from './createDefaultRenderers';\nexport var useRenderers = function (_a) {\n    var renderItem = _a.renderItem, renderItemTitle = _a.renderItemTitle, renderItemArrow = _a.renderItemArrow, renderRenameInput = _a.renderRenameInput, renderItemsContainer = _a.renderItemsContainer, renderTreeContainer = _a.renderTreeContainer, renderDragBetweenLine = _a.renderDragBetweenLine, renderSearchInput = _a.renderSearchInput, renderLiveDescriptorContainer = _a.renderLiveDescriptorContainer, renderDepthOffset = _a.renderDepthOffset;\n    var defaultRenderers = useMemo(function () { return createDefaultRenderers(renderDepthOffset !== null && renderDepthOffset !== void 0 ? renderDepthOffset : 10); }, [renderDepthOffset]);\n    var customRenderers = {\n        renderItem: renderItem,\n        renderItemTitle: renderItemTitle,\n        renderItemArrow: renderItemArrow,\n        renderRenameInput: renderRenameInput,\n        renderItemsContainer: renderItemsContainer,\n        renderTreeContainer: renderTreeContainer,\n        renderDragBetweenLine: renderDragBetweenLine,\n        renderSearchInput: renderSearchInput,\n        renderLiveDescriptorContainer: renderLiveDescriptorContainer,\n        renderDepthOffset: renderDepthOffset,\n    };\n    var renderers = Object.entries(defaultRenderers).reduce(function (acc, _a) {\n        var key = _a[0], value = _a[1];\n        var keyMapped = key;\n        if (customRenderers[keyMapped]) {\n            acc[keyMapped] = customRenderers[keyMapped];\n        }\n        else {\n            acc[keyMapped] = value;\n        }\n        return acc;\n    }, {});\n    renderers.renderItem.displayName = 'RenderItem';\n    renderers.renderItemTitle.displayName = 'RenderItemTitle';\n    renderers.renderItemArrow.displayName = 'RenderItemArrow';\n    renderers.renderRenameInput.displayName = 'RenderRenameInput';\n    renderers.renderItemsContainer.displayName = 'RenderItemsContainer';\n    renderers.renderTreeContainer.displayName = 'RenderTreeContainer';\n    renderers.renderDragBetweenLine.displayName =\n        'RenderDragBetweenLine';\n    renderers.renderSearchInput.displayName = 'RenderSearchInput';\n    return renderers;\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nvar cx = function () {\n    var classNames = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        classNames[_i] = arguments[_i];\n    }\n    return classNames.filter(function (cn) { return !!cn; }).join(' ');\n};\nexport var createDefaultRenderers = function (renderDepthOffset, rtl) { return ({\n    renderItemTitle: function (_a) {\n        var title = _a.title, context = _a.context, info = _a.info;\n        if (!info.isSearching || !context.isSearchMatching) {\n            return title;\n        }\n        var startIndex = title.toLowerCase().indexOf(info.search.toLowerCase());\n        return (React.createElement(React.Fragment, null,\n            startIndex > 0 && React.createElement(\"span\", null, title.slice(0, startIndex)),\n            React.createElement(\"span\", { className: \"rct-tree-item-search-highlight\" }, title.slice(startIndex, startIndex + info.search.length)),\n            startIndex + info.search.length < title.length && (React.createElement(\"span\", null, title.slice(startIndex + info.search.length, title.length)))));\n    },\n    renderItemArrow: function (_a) {\n        var item = _a.item, context = _a.context;\n        return (\n        // Icons from https://blueprintjs.com/docs/#icons\n        React.createElement(\"div\", __assign({ className: cx(item.isFolder && 'rct-tree-item-arrow-isFolder', context.isExpanded && 'rct-tree-item-arrow-expanded', 'rct-tree-item-arrow') }, context.arrowProps), item.isFolder &&\n            (context.isExpanded ? (React.createElement(\"svg\", { version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", xmlnsXlink: \"http://www.w3.org/1999/xlink\", x: \"0px\", y: \"0px\", viewBox: \"0 0 16 16\", enableBackground: \"new 0 0 16 16\", xmlSpace: \"preserve\" },\n                React.createElement(\"g\", null,\n                    React.createElement(\"g\", null,\n                        React.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\", className: \"rct-tree-item-arrow-path\" }))))) : (React.createElement(\"svg\", { version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", xmlnsXlink: \"http://www.w3.org/1999/xlink\", x: \"0px\", y: \"0px\", viewBox: \"0 0 16 16\", enableBackground: \"new 0 0 16 16\", xmlSpace: \"preserve\" },\n                React.createElement(\"g\", null,\n                    React.createElement(\"g\", null,\n                        React.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z\", className: \"rct-tree-item-arrow-path\" }))))))));\n    },\n    renderItem: function (_a) {\n        var item = _a.item, depth = _a.depth, children = _a.children, title = _a.title, context = _a.context, arrow = _a.arrow;\n        var InteractiveComponent = context.isRenaming ? 'div' : 'button';\n        var type = context.isRenaming ? undefined : 'button';\n        // TODO have only root li component create all the classes\n        return (React.createElement(\"li\", __assign({}, context.itemContainerWithChildrenProps, { className: cx('rct-tree-item-li', item.isFolder && 'rct-tree-item-li-isFolder', context.isSelected && 'rct-tree-item-li-selected', context.isExpanded && 'rct-tree-item-li-expanded', context.isFocused && 'rct-tree-item-li-focused', context.isDraggingOver && 'rct-tree-item-li-dragging-over', context.isSearchMatching && 'rct-tree-item-li-search-match') }),\n            React.createElement(\"div\", __assign({}, context.itemContainerWithoutChildrenProps, { style: { '--depthOffset': \"\".concat((depth + 1) * renderDepthOffset, \"px\") }, className: cx('rct-tree-item-title-container', item.isFolder && 'rct-tree-item-title-container-isFolder', context.isSelected && 'rct-tree-item-title-container-selected', context.isExpanded && 'rct-tree-item-title-container-expanded', context.isFocused && 'rct-tree-item-title-container-focused', context.isDraggingOver &&\n                    'rct-tree-item-title-container-dragging-over', context.isSearchMatching &&\n                    'rct-tree-item-title-container-search-match') }),\n                arrow,\n                React.createElement(InteractiveComponent, __assign({ type: type }, context.interactiveElementProps, { className: cx('rct-tree-item-button', item.isFolder && 'rct-tree-item-button-isFolder', context.isSelected && 'rct-tree-item-button-selected', context.isExpanded && 'rct-tree-item-button-expanded', context.isFocused && 'rct-tree-item-button-focused', context.isDraggingOver && 'rct-tree-item-button-dragging-over', context.isSearchMatching && 'rct-tree-item-button-search-match') }), title)),\n            children));\n    },\n    renderRenameInput: function (_a) {\n        var inputProps = _a.inputProps, inputRef = _a.inputRef, submitButtonProps = _a.submitButtonProps, submitButtonRef = _a.submitButtonRef, formProps = _a.formProps;\n        return (React.createElement(\"form\", __assign({}, formProps, { className: \"rct-tree-item-renaming-form\" }),\n            React.createElement(\"input\", __assign({}, inputProps, { ref: inputRef, className: \"rct-tree-item-renaming-input\" })),\n            React.createElement(\"input\", __assign({}, submitButtonProps, { ref: submitButtonRef, type: \"submit\", className: \"rct-tree-item-renaming-submit-button\", value: \"\\uD83D\\uDDF8\" }))));\n    },\n    renderTreeContainer: function (_a) {\n        var children = _a.children, containerProps = _a.containerProps, info = _a.info;\n        return (React.createElement(\"div\", { className: cx('rct-tree-root', info.isFocused && 'rct-tree-root-focus', info.isRenaming && 'rct-tree-root-renaming', info.areItemsSelected && 'rct-tree-root-itemsselected', rtl && 'rct-rtl') },\n            React.createElement(\"div\", __assign({}, containerProps, { style: __assign({ minHeight: '30px' }, containerProps.style) }), children)));\n    },\n    renderItemsContainer: function (_a) {\n        var children = _a.children, containerProps = _a.containerProps;\n        return (React.createElement(\"ul\", __assign({}, containerProps, { className: \"rct-tree-items-container\" }), children));\n    },\n    renderDragBetweenLine: function (_a) {\n        var draggingPosition = _a.draggingPosition, lineProps = _a.lineProps;\n        return (React.createElement(\"div\", __assign({}, lineProps, { style: { left: \"\".concat(draggingPosition.depth * renderDepthOffset, \"px\") }, className: cx('rct-tree-drag-between-line', draggingPosition.targetType === 'between-items' &&\n                draggingPosition.linePosition === 'top' &&\n                'rct-tree-drag-between-line-top', draggingPosition.targetType === 'between-items' &&\n                draggingPosition.linePosition === 'bottom' &&\n                'rct-tree-drag-between-line-bottom') })));\n    },\n    renderSearchInput: function (_a) {\n        var inputProps = _a.inputProps;\n        return (React.createElement(\"div\", { className: cx('rct-tree-search-input-container') },\n            React.createElement(\"span\", { className: \"rct-tree-input-icon\" }),\n            React.createElement(\"input\", __assign({}, inputProps, { className: cx('rct-tree-search-input') }))));\n    },\n    renderLiveDescriptorContainer: function (_a) {\n        var tree = _a.tree, children = _a.children;\n        return (React.createElement(\"div\", { id: \"rct-livedescription-\".concat(tree.treeId), style: {\n                clip: 'rect(0 0 0 0)',\n                clipPath: 'inset(50%)',\n                height: '1px',\n                overflow: 'hidden',\n                position: 'absolute',\n                whiteSpace: 'nowrap',\n                width: '1px',\n            } }, children));\n    },\n    renderDepthOffset: renderDepthOffset,\n}); };\n", "export var getItemsLinearly = function (rootItem, viewState, items, depth) {\n    var _a, _b, _c;\n    if (depth === void 0) { depth = 0; }\n    var itemIds = [];\n    for (var _i = 0, _d = (_b = (_a = items[rootItem]) === null || _a === void 0 ? void 0 : _a.children) !== null && _b !== void 0 ? _b : []; _i < _d.length; _i++) {\n        var itemId = _d[_i];\n        var item = items[itemId];\n        itemIds.push({ item: itemId, depth: depth });\n        if (item &&\n            item.isFolder &&\n            !!item.children &&\n            ((_c = viewState.expandedItems) === null || _c === void 0 ? void 0 : _c.includes(itemId))) {\n            itemIds.push.apply(itemIds, getItemsLinearly(itemId, viewState, items, depth + 1));\n        }\n    }\n    return itemIds;\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { useRef } from 'react';\nimport { TreeItemChildren } from '../treeItem/TreeItemChildren';\nimport { DragBetweenLine } from './DragBetweenLine';\nimport { useFocusWithin } from './useFocusWithin';\nimport { useTreeKeyboardBindings } from './useTreeKeyboardBindings';\nimport { SearchInput } from '../search/SearchInput';\nimport { useTree } from './Tree';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useDragAndDrop } from '../drag/DragAndDropProvider';\nimport { MaybeLiveDescription } from './MaybeLiveDescription';\nexport var TreeManager = function () {\n    var _a = useTree(), treeId = _a.treeId, rootItem = _a.rootItem, renderers = _a.renderers, treeInformation = _a.treeInformation;\n    var environment = useTreeEnvironment();\n    var containerRef = useRef();\n    var dnd = useDragAndDrop();\n    useTreeKeyboardBindings();\n    useFocusWithin(containerRef.current, function () {\n        environment.setActiveTree(treeId);\n    }, function () {\n        environment.setActiveTree(function (oldTreeId) {\n            return oldTreeId === treeId ? undefined : oldTreeId;\n        });\n    });\n    var rootChildren = environment.items[rootItem].children;\n    var treeChildren = (React.createElement(React.Fragment, null,\n        React.createElement(MaybeLiveDescription, null),\n        React.createElement(TreeItemChildren, { depth: 0, parentId: rootItem }, rootChildren !== null && rootChildren !== void 0 ? rootChildren : []),\n        React.createElement(DragBetweenLine, { treeId: treeId }),\n        React.createElement(SearchInput, { containerRef: containerRef.current })));\n    var containerProps = __assign({ onDragOver: function (e) {\n            e.preventDefault(); // Allow drop. Also implicitly set by items, but needed here as well for dropping on empty space\n            dnd.onDragOverTreeHandler(e, treeId, containerRef);\n        }, onDragLeave: function (e) {\n            dnd.onDragLeaveContainerHandler(e, containerRef);\n        }, onMouseDown: function () { return dnd.abortProgrammaticDrag(); }, ref: containerRef, style: { position: 'relative' }, role: 'tree', 'aria-label': !treeInformation.treeLabelledBy\n            ? treeInformation.treeLabel\n            : undefined, 'aria-labelledby': treeInformation.treeLabelledBy }, {\n        'data-rct-tree': treeId,\n    });\n    return renderers.renderTreeContainer({\n        children: treeChildren,\n        info: treeInformation,\n        containerProps: containerProps,\n    });\n};\n", "import * as React from 'react';\nimport { useTree } from './Tree';\nimport { useDragAndDrop } from '../drag/DragAndDropProvider';\nexport var DragBetweenLine = function (_a) {\n    var _b;\n    var treeId = _a.treeId;\n    var _c = useDragAndDrop(), draggingPosition = _c.draggingPosition, itemHeight = _c.itemHeight;\n    var renderers = useTree().renderers;\n    var shouldDisplay = draggingPosition &&\n        draggingPosition.targetType === 'between-items' &&\n        draggingPosition.treeId === treeId;\n    if (!shouldDisplay) {\n        return null;\n    }\n    var lineProps = {\n        onDragOver: function (e) { return e.preventDefault(); }, // Allow dropping\n    };\n    return (React.createElement(\"div\", { style: {\n            position: 'absolute',\n            left: '0',\n            right: '0',\n            top: \"\".concat(((_b = draggingPosition === null || draggingPosition === void 0 ? void 0 : draggingPosition.linearIndex) !== null && _b !== void 0 ? _b : 0) * itemHeight, \"px\"),\n        } }, renderers.renderDragBetweenLine({\n        draggingPosition: draggingPosition,\n        lineProps: lineProps,\n    })));\n};\n", "import { useRef, useState } from 'react';\nimport { useHtmlElementEventListener } from '../useHtmlElementEventListener';\nimport { useCallSoon } from '../useCallSoon';\nexport var useFocusWithin = function (element, onFocusIn, onFocusOut) {\n    var _a = useState(false), focusWithin = _a[0], setFocusWithin = _a[1];\n    var isLoosingFocusFlag = useRef(false);\n    var callSoon = useCallSoon();\n    useHtmlElementEventListener(element, 'focusin', function () {\n        if (!focusWithin) {\n            setFocusWithin(true);\n            onFocusIn === null || onFocusIn === void 0 ? void 0 : onFocusIn();\n        }\n        if (isLoosingFocusFlag.current) {\n            isLoosingFocusFlag.current = false;\n        }\n    });\n    useHtmlElementEventListener(element, 'focusout', function () {\n        isLoosingFocusFlag.current = true;\n        callSoon(function () {\n            if (isLoosingFocusFlag.current &&\n                !(element === null || element === void 0 ? void 0 : element.contains(document.activeElement))) {\n                onFocusOut === null || onFocusOut === void 0 ? void 0 : onFocusOut();\n                isLoosingFocusFlag.current = false;\n                setFocusWithin(false);\n            }\n        });\n    });\n    return focusWithin;\n};\n", "import { useEffect } from 'react';\nimport { useStableHandler } from './useStableHandler';\nexport var useHtmlElementEventListener = function (element, type, listener) {\n    var stableListener = useStableHandler(listener);\n    useEffect(function () {\n        if (element) {\n            element.addEventListener(type, stableListener);\n            return function () { return element.removeEventListener(type, stableListener); };\n        }\n        return function () { };\n    }, [element, stableListener, type]);\n};\n", "import { useHtmlElementEventListener } from '../useHtmlElementEventListener';\nimport { getDocument } from '../utils';\nexport var useKey = function (key, onHit, active) {\n    useHtmlElementEventListener(getDocument(), 'keydown', function (e) {\n        if (!active) {\n            return;\n        }\n        if (active && key.toLowerCase() === e.key.toLowerCase()) {\n            onHit(e);\n        }\n    });\n};\n", "import { useMemo, useRef } from 'react';\nimport { useHtmlElementEventListener } from '../useHtmlElementEventListener';\nimport { useKeyboardBindings } from './useKeyboardBindings';\nimport { useCallSoon } from '../useCallSoon';\nimport { getDocument } from '../utils';\nvar elementsThatCanTakeText = ['input', 'textarea'];\nexport var useHotkey = function (combinationName, onHit, active, activatableWhileFocusingInput) {\n    if (activatableWhileFocusingInput === void 0) { activatableWhileFocusingInput = false; }\n    var pressedKeys = useRef([]);\n    var keyboardBindings = useKeyboardBindings();\n    var callSoon = useCallSoon();\n    var possibleCombinations = useMemo(function () {\n        return keyboardBindings[combinationName].map(function (combination) {\n            return combination.split('+');\n        });\n    }, [combinationName, keyboardBindings]);\n    useHtmlElementEventListener(getDocument(), 'keydown', function (e) {\n        var _a;\n        if (active === false) {\n            return;\n        }\n        if ((elementsThatCanTakeText.includes((_a = e.target.tagName) === null || _a === void 0 ? void 0 : _a.toLowerCase()) ||\n            e.target.isContentEditable) &&\n            !activatableWhileFocusingInput) {\n            // Skip if an input is selected\n            return;\n        }\n        if (!pressedKeys.current.includes(e.key)) {\n            pressedKeys.current.push(e.key);\n            var pressedKeysLowercase_1 = pressedKeys.current.map(function (key) {\n                return key.toLowerCase();\n            });\n            var partialMatch = possibleCombinations\n                .map(function (combination) {\n                return pressedKeysLowercase_1\n                    .map(function (key) { return combination.includes(key.toLowerCase()); })\n                    .reduce(function (a, b) { return a && b; }, true);\n            })\n                .reduce(function (a, b) { return a || b; }, false);\n            if (partialMatch) {\n                if (pressedKeys.current.length > 1 || !/^[a-zA-Z]$/.test(e.key)) {\n                    // Prevent default, but not if this is the first input and a letter (which should trigger a search)\n                    e.preventDefault();\n                }\n            }\n        }\n    });\n    useHtmlElementEventListener(getDocument(), 'keyup', function (e) {\n        if (active === false) {\n            return;\n        }\n        var pressedKeysLowercase = pressedKeys.current.map(function (key) {\n            return key.toLowerCase();\n        });\n        var match = possibleCombinations\n            .map(function (combination) {\n            return combination\n                .map(function (key) { return pressedKeysLowercase.includes(key.toLowerCase()); })\n                .reduce(function (a, b) { return a && b; }, true);\n        })\n            .reduce(function (a, b) { return a || b; }, false);\n        if (match) {\n            callSoon(function () { return onHit(e); });\n        }\n        pressedKeys.current = pressedKeys.current.filter(function (key) { return key !== e.key; });\n    });\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useMemo } from 'react';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { defaultKeyboardBindings } from './defaultKeyboardBindings';\nexport var useKeyboardBindings = function () {\n    var environment = useTreeEnvironment();\n    return useMemo(function () {\n        if (environment.keyboardBindings) {\n            return __assign(__assign({}, defaultKeyboardBindings), environment.keyboardBindings);\n        }\n        return defaultKeyboardBindings;\n    }, [environment.keyboardBindings]);\n};\n", "export var defaultKeyboardBindings = {\n    expandSiblings: ['control+*'],\n    moveFocusToFirstItem: ['home'],\n    moveFocusToLastItem: ['end'],\n    primaryAction: ['enter'],\n    renameItem: ['f2'],\n    abortRenameItem: ['escape'],\n    toggleSelectItem: ['control+space'],\n    abortSearch: ['escape', 'enter'],\n    startSearch: [],\n    selectAll: ['control+a'],\n    startProgrammaticDnd: ['control+d'],\n    completeProgrammaticDnd: ['enter'],\n    abortProgrammaticDnd: ['escape'],\n};\n", "import { useTree } from './Tree';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nexport var useViewState = function () {\n    var _a;\n    var treeId = useTree().treeId;\n    var viewState = useTreeEnvironment().viewState;\n    return (_a = viewState[treeId]) !== null && _a !== void 0 ? _a : {};\n};\n", "import { useTreeEnvironment } from './ControlledTreeEnvironment';\nexport var useLinearItems = function (treeId) {\n    return useTreeEnvironment().linearItems[treeId];\n};\n", "import { useViewState } from './useViewState';\nimport { useTree } from './Tree';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useLinearItems } from '../controlledEnvironment/useLinearItems';\nimport { useStableHandler } from '../useStableHandler';\nexport var useMoveFocusToIndex = function () {\n    var treeId = useTree().treeId;\n    var _a = useTreeEnvironment(), onFocusItem = _a.onFocusItem, items = _a.items;\n    var linearItems = useLinearItems(treeId);\n    var viewState = useViewState();\n    return useStableHandler(function (computeNewIndex) {\n        var _a;\n        var currentIndex = (_a = linearItems.findIndex(function (item) { return item.item === viewState.focusedItem; })) !== null && _a !== void 0 ? _a : 0;\n        var newIndex = computeNewIndex(currentIndex, linearItems);\n        var newIndexBounded = Math.max(0, Math.min(linearItems.length - 1, newIndex));\n        var newFocusItem = items[linearItems[newIndexBounded].item];\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(newFocusItem, treeId);\n        return newFocusItem;\n    });\n};\n", "var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useCallback, useRef } from 'react';\nimport { useViewState } from './useViewState';\nimport { useTree } from './Tree';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useLinearItems } from '../controlledEnvironment/useLinearItems';\nvar usePrevious = function (value) {\n    var ref = useRef({\n        target: value,\n        previous: undefined,\n    });\n    if (ref.current.target !== value) {\n        ref.current.previous = ref.current.target;\n        ref.current.target = value;\n    }\n    return ref.current.previous;\n};\nexport var useSelectUpTo = function (startingAt) {\n    var viewState = useViewState();\n    var treeId = useTree().treeId;\n    var linearItems = useLinearItems(treeId);\n    var onSelectItems = useTreeEnvironment().onSelectItems;\n    var focusedItemPrevious = usePrevious(viewState.focusedItem);\n    return useCallback(function (item, overrideOldSelection) {\n        var _a, _b;\n        if (overrideOldSelection === void 0) { overrideOldSelection = false; }\n        var itemIndex = item.index;\n        var selectMergedItems = function (oldSelection, newSelection) {\n            var merged = __spreadArray(__spreadArray([], (overrideOldSelection ? [] : oldSelection), true), newSelection.filter(function (i) { return overrideOldSelection || !oldSelection.includes(i); }), true);\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems(merged, treeId);\n        };\n        if (viewState &&\n            viewState.selectedItems &&\n            viewState.selectedItems.length > 0) {\n            // Depending on whether focusItem() or selectUpTo() was called first, which item was the last focused item depends\n            var lastFocus_1 = viewState.focusedItem === itemIndex\n                ? focusedItemPrevious\n                : viewState.focusedItem;\n            var selectionStart = startingAt === 'last-focus'\n                ? linearItems.findIndex(function (linearItem) { return lastFocus_1 === linearItem.item; })\n                : linearItems.findIndex(function (linearItem) { var _a; return (_a = viewState.selectedItems) === null || _a === void 0 ? void 0 : _a.includes(linearItem.item); });\n            var selectionEnd = linearItems.findIndex(function (linearItem) { return linearItem.item === itemIndex; });\n            if (selectionStart < selectionEnd) {\n                var selection = linearItems\n                    .slice(selectionStart, selectionEnd + 1)\n                    .map(function (_a) {\n                    var item = _a.item;\n                    return item;\n                });\n                selectMergedItems((_a = viewState.selectedItems) !== null && _a !== void 0 ? _a : [], selection);\n            }\n            else {\n                var selection = linearItems\n                    .slice(selectionEnd, selectionStart + 1)\n                    .map(function (_a) {\n                    var item = _a.item;\n                    return item;\n                });\n                selectMergedItems((_b = viewState.selectedItems) !== null && _b !== void 0 ? _b : [], selection);\n            }\n        }\n        else {\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems([itemIndex], treeId);\n        }\n    }, [\n        viewState,\n        onSelectItems,\n        treeId,\n        startingAt,\n        linearItems,\n        focusedItemPrevious,\n    ]);\n};\n", "var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useKey } from '../hotkeys/useKey';\nimport { useHotkey } from '../hotkeys/useHotkey';\nimport { useMoveFocusToIndex } from './useMoveFocusToIndex';\nimport { useViewState } from './useViewState';\nimport { useTree } from './Tree';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useDragAndDrop } from '../drag/DragAndDropProvider';\nimport { useSelectUpTo } from './useSelectUpTo';\nimport { useLinearItems } from '../controlledEnvironment/useLinearItems';\nexport var useTreeKeyboardBindings = function () {\n    var _a;\n    var environment = useTreeEnvironment();\n    var _b = useTree(), treeId = _b.treeId, setRenamingItem = _b.setRenamingItem, setSearch = _b.setSearch, renamingItem = _b.renamingItem;\n    var linearItems = useLinearItems(treeId);\n    var dnd = useDragAndDrop();\n    var viewState = useViewState();\n    var moveFocusToIndex = useMoveFocusToIndex();\n    var selectUpTo = useSelectUpTo('first-selected');\n    var isActiveTree = environment.activeTreeId === treeId;\n    var isRenaming = !!renamingItem;\n    var disableArrowKeys = environment.disableArrowKeys;\n    var enableArrowKeys = !disableArrowKeys && isActiveTree && !isRenaming;\n    useKey('arrowdown', function (e) {\n        e.preventDefault();\n        if (dnd.isProgrammaticallyDragging) {\n            dnd.programmaticDragDown();\n        }\n        else {\n            var newFocusItem = moveFocusToIndex(function (currentIndex) { return currentIndex + 1; });\n            if (e.shiftKey) {\n                selectUpTo(newFocusItem);\n            }\n        }\n    }, enableArrowKeys);\n    useKey('arrowup', function (e) {\n        e.preventDefault();\n        if (dnd.isProgrammaticallyDragging) {\n            dnd.programmaticDragUp();\n        }\n        else {\n            var newFocusItem = moveFocusToIndex(function (currentIndex) { return currentIndex - 1; });\n            if (e.shiftKey) {\n                selectUpTo(newFocusItem);\n            }\n        }\n    }, enableArrowKeys);\n    useHotkey('moveFocusToFirstItem', function (e) {\n        e.preventDefault();\n        moveFocusToIndex(function () { return 0; });\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    useHotkey('moveFocusToLastItem', function (e) {\n        e.preventDefault();\n        moveFocusToIndex(function (currentIndex, linearItems) { return linearItems.length - 1; });\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    useKey('arrowright', function (e) {\n        e.preventDefault();\n        moveFocusToIndex(function (currentIndex, linearItems) {\n            var _a, _b;\n            var item = environment.items[linearItems[currentIndex].item];\n            if (item.isFolder) {\n                if ((_a = viewState.expandedItems) === null || _a === void 0 ? void 0 : _a.includes(item.index)) {\n                    return currentIndex + 1;\n                }\n                (_b = environment.onExpandItem) === null || _b === void 0 ? void 0 : _b.call(environment, item, treeId);\n            }\n            return currentIndex;\n        });\n    }, enableArrowKeys && !dnd.isProgrammaticallyDragging);\n    useKey('arrowleft', function (e) {\n        e.preventDefault();\n        moveFocusToIndex(function (currentIndex, linearItems) {\n            var _a, _b;\n            var item = environment.items[linearItems[currentIndex].item];\n            var itemDepth = linearItems[currentIndex].depth;\n            if (item.isFolder && ((_a = viewState.expandedItems) === null || _a === void 0 ? void 0 : _a.includes(item.index))) {\n                (_b = environment.onCollapseItem) === null || _b === void 0 ? void 0 : _b.call(environment, item, treeId);\n            }\n            else if (itemDepth > 0) {\n                var parentIndex = currentIndex;\n                for (parentIndex; linearItems[parentIndex].depth !== itemDepth - 1; parentIndex -= 1)\n                    ;\n                return parentIndex;\n            }\n            return currentIndex;\n        });\n    }, enableArrowKeys && !dnd.isProgrammaticallyDragging);\n    useHotkey('primaryAction', function (e) {\n        var _a, _b;\n        e.preventDefault();\n        if (viewState.focusedItem !== undefined) {\n            (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, [viewState.focusedItem], treeId);\n            (_b = environment.onPrimaryAction) === null || _b === void 0 ? void 0 : _b.call(environment, environment.items[viewState.focusedItem], treeId);\n        }\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    useHotkey('toggleSelectItem', function (e) {\n        var _a, _b, _c;\n        e.preventDefault();\n        if (viewState.focusedItem !== undefined) {\n            if (viewState.selectedItems &&\n                viewState.selectedItems.includes(viewState.focusedItem)) {\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, viewState.selectedItems.filter(function (item) { return item !== viewState.focusedItem; }), treeId);\n            }\n            else {\n                (_b = environment.onSelectItems) === null || _b === void 0 ? void 0 : _b.call(environment, __spreadArray(__spreadArray([], ((_c = viewState.selectedItems) !== null && _c !== void 0 ? _c : []), true), [viewState.focusedItem], false), treeId);\n            }\n        }\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    useHotkey('selectAll', function (e) {\n        var _a;\n        e.preventDefault();\n        (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, linearItems.map(function (_a) {\n            var item = _a.item;\n            return item;\n        }), treeId);\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    useHotkey('renameItem', function (e) {\n        var _a;\n        if (viewState.focusedItem === undefined) {\n            return;\n        }\n        e.preventDefault();\n        var item = environment.items[viewState.focusedItem];\n        if (item.canRename === false) {\n            return;\n        }\n        (_a = environment.onStartRenamingItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\n        setRenamingItem(item.index);\n    }, isActiveTree && ((_a = environment.canRename) !== null && _a !== void 0 ? _a : true) && !isRenaming);\n    useHotkey('startSearch', function (e) {\n        var _a, _b;\n        e.preventDefault();\n        setSearch('');\n        (_b = (_a = document.querySelector('[data-rct-search-input=\"true\"]')) === null || _a === void 0 ? void 0 : _a.focus) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    useHotkey('startProgrammaticDnd', function (e) {\n        e.preventDefault();\n        dnd.startProgrammaticDrag();\n    }, isActiveTree && !isRenaming);\n    useHotkey('completeProgrammaticDnd', function (e) {\n        e.preventDefault();\n        dnd.completeProgrammaticDrag();\n    }, isActiveTree && dnd.isProgrammaticallyDragging && !isRenaming);\n    useHotkey('abortProgrammaticDnd', function (e) {\n        e.preventDefault();\n        dnd.abortProgrammaticDrag();\n    }, isActiveTree && dnd.isProgrammaticallyDragging && !isRenaming);\n};\n", "export var defaultMatcher = function (search, item, itemTitle) {\n    return itemTitle.toLowerCase().includes(search.toLowerCase());\n};\n", "import { useTree } from '../tree/Tree';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { defaultMatcher } from './defaultMatcher';\nimport { useSideEffect } from '../useSideEffect';\nimport { useLinearItems } from '../controlledEnvironment/useLinearItems';\nimport { useCallSoon } from '../useCallSoon';\nexport var useSearchMatchFocus = function () {\n    var _a = useTreeEnvironment(), doesSearchMatchItem = _a.doesSearchMatchItem, items = _a.items, getItemTitle = _a.getItemTitle, onFocusItem = _a.onFocusItem;\n    var _b = useTree(), search = _b.search, treeId = _b.treeId;\n    var linearItems = useLinearItems(treeId);\n    var callSoon = useCallSoon();\n    useSideEffect(function () {\n        if (search && search.length > 0) {\n            callSoon(function () {\n                var focusItem = linearItems.find(function (_a) {\n                    var item = _a.item;\n                    return (doesSearchMatchItem !== null && doesSearchMatchItem !== void 0 ? doesSearchMatchItem : defaultMatcher)(search, items[item], getItemTitle(items[item]));\n                });\n                if (focusItem) {\n                    onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(items[focusItem.item], treeId);\n                }\n            });\n        }\n    }, [\n        doesSearchMatchItem,\n        getItemTitle,\n        linearItems,\n        items,\n        onFocusItem,\n        search,\n        treeId,\n        callSoon,\n    ], [search]);\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useHtmlElementEventListener } from '../useHtmlElementEventListener';\nimport { useHotkey } from '../hotkeys/useHotkey';\nimport { useTree } from '../tree/Tree';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useSearchMatchFocus } from './useSearchMatchFocus';\nimport { useViewState } from '../tree/useViewState';\nimport { useCallSoon } from '../useCallSoon';\nimport { getDocument } from '../utils';\nexport var SearchInput = function (_a) {\n    var _b;\n    var containerRef = _a.containerRef;\n    var _c = useTree(), search = _c.search, setSearch = _c.setSearch, treeId = _c.treeId, renderers = _c.renderers, renamingItem = _c.renamingItem;\n    var environment = useTreeEnvironment();\n    useViewState();\n    var isActiveTree = environment.activeTreeId === treeId;\n    var callSoon = useCallSoon();\n    useSearchMatchFocus();\n    var clearSearch = function () {\n        var _a, _b, _c;\n        setSearch(null);\n        if ((_a = environment.autoFocus) !== null && _a !== void 0 ? _a : true) {\n            // Refocus item in tree\n            // TODO move logic as reusable method into tree or tree environment\n            var focusItem = (_b = getDocument()) === null || _b === void 0 ? void 0 : _b.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-focus=\\\"true\\\"]\"));\n            (_c = focusItem === null || focusItem === void 0 ? void 0 : focusItem.focus) === null || _c === void 0 ? void 0 : _c.call(focusItem);\n        }\n    };\n    useHotkey('abortSearch', function () {\n        // Without the callSoon, hitting enter to abort\n        // and then moving focus weirdly moves the selected item along\n        // with the focused item.\n        callSoon(function () {\n            clearSearch();\n        });\n    }, isActiveTree && search !== null, true);\n    useHtmlElementEventListener(containerRef, 'keydown', function (e) {\n        var _a, _b;\n        var unicode = e.key.charCodeAt(0);\n        if (((_a = environment.canSearch) !== null && _a !== void 0 ? _a : true) &&\n            ((_b = environment.canSearchByStartingTyping) !== null && _b !== void 0 ? _b : true) &&\n            isActiveTree &&\n            search === null &&\n            !renamingItem &&\n            !e.ctrlKey &&\n            !e.shiftKey &&\n            !e.altKey &&\n            !e.metaKey &&\n            ((unicode >= 48 && unicode <= 57) || // number\n                // (unicode >= 65 && unicode <= 90) || // uppercase letter\n                (unicode >= 97 && unicode <= 122)) // lowercase letter\n        ) {\n            setSearch('');\n        }\n    });\n    if (!((_b = environment.canSearch) !== null && _b !== void 0 ? _b : true) || search === null) {\n        return null;\n    }\n    return renderers.renderSearchInput({\n        inputProps: __assign({ value: search, onChange: function (e) { return setSearch(e.target.value); }, onBlur: function () {\n                clearSearch();\n            }, ref: function (el) {\n                var _a;\n                (_a = el === null || el === void 0 ? void 0 : el.focus) === null || _a === void 0 ? void 0 : _a.call(el);\n            }, 'aria-label': 'Search for items' }, {\n            'data-rct-search-input': 'true',\n        }),\n    });\n};\n", "import * as React from 'react';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { LiveDescription } from './LiveDescription';\nexport var MaybeLiveDescription = function () {\n    var _a;\n    var env = useTreeEnvironment();\n    if (!((_a = env.showLiveDescription) !== null && _a !== void 0 ? _a : true)) {\n        return null;\n    }\n    return React.createElement(LiveDescription, null);\n};\n", "import * as React from 'react';\nimport { useMemo } from 'react';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { defaultLiveDescriptors } from './defaultLiveDescriptors';\nimport { useTree } from './Tree';\nimport { useDragAndDrop } from '../drag/DragAndDropProvider';\nimport { resolveLiveDescriptor } from './resolveLiveDescriptor';\nimport { useKeyboardBindings } from '../hotkeys/useKeyboardBindings';\nvar LiveWrapper = function (_a) {\n    var children = _a.children, live = _a.live;\n    return React.createElement(\"div\", { \"aria-live\": live, dangerouslySetInnerHTML: { __html: children } });\n};\nexport var LiveDescription = function () {\n    var env = useTreeEnvironment();\n    var tree = useTree();\n    var dnd = useDragAndDrop();\n    var keys = useKeyboardBindings();\n    var descriptors = useMemo(function () { var _a; return (_a = env.liveDescriptors) !== null && _a !== void 0 ? _a : defaultLiveDescriptors; }, [env.liveDescriptors]);\n    var MainWrapper = tree.renderers.renderLiveDescriptorContainer;\n    if (tree.treeInformation.isRenaming) {\n        return (React.createElement(MainWrapper, { tree: tree },\n            React.createElement(LiveWrapper, { live: \"polite\" }, resolveLiveDescriptor(descriptors.renamingItem, env, dnd, tree, keys))));\n    }\n    if (tree.treeInformation.isSearching) {\n        return (React.createElement(MainWrapper, { tree: tree },\n            React.createElement(LiveWrapper, { live: \"polite\" }, resolveLiveDescriptor(descriptors.searching, env, dnd, tree, keys))));\n    }\n    if (tree.treeInformation.isProgrammaticallyDragging) {\n        return (React.createElement(MainWrapper, { tree: tree },\n            React.createElement(LiveWrapper, { live: \"polite\" }, resolveLiveDescriptor(descriptors.programmaticallyDragging, env, dnd, tree, keys)),\n            React.createElement(LiveWrapper, { live: \"assertive\" }, resolveLiveDescriptor(descriptors.programmaticallyDraggingTarget, env, dnd, tree, keys))));\n    }\n    return (React.createElement(MainWrapper, { tree: tree },\n        React.createElement(LiveWrapper, { live: \"off\" }, resolveLiveDescriptor(descriptors.introduction, env, dnd, tree, keys))));\n};\n", "export var defaultLiveDescriptors = {\n    introduction: \"\\n    <p>Accessibility guide for tree {treeLabel}.</p>\\n    <p>\\n      Navigate the tree with the arrow keys. Common tree hotkeys apply. Further keybindings are available:\\n    </p>\\n    <ul>\\n      <li>{keybinding:primaryAction} to execute primary action on focused item</li>\\n      <li>{keybinding:renameItem} to start renaming the focused item</li>\\n      <li>{keybinding:abortRenameItem} to abort renaming an item</li>\\n      <li>{keybinding:startProgrammaticDnd} to start dragging selected items</li>\\n    </ul>\\n  \",\n    renamingItem: \"\\n    <p>Renaming the item {renamingItem}.</p>\\n    <p>Use the keybinding {keybinding:abortRenameItem} to abort renaming.</p>\\n  \",\n    searching: \"\\n    <p>Searching</p>\\n  \",\n    programmaticallyDragging: \"\\n    <p>Dragging items {dragItems}.</p>\\n    <p>Press the arrow keys to move the drag target.</p>\\n    <p>Press {keybinding:completeProgrammaticDnd} to drop or {keybinding:abortProgrammaticDnd} to abort.</p>\\n  \",\n    programmaticallyDraggingTarget: \"\\n    <p>Drop target is {dropTarget}.</p>\\n  \",\n};\n", "export var resolveLiveDescriptor = function (descriptor, environment, dnd, tree, keyboardBindings) {\n    var getItemTitle = function (index) {\n        return environment.getItemTitle(environment.items[index]);\n    };\n    return descriptor.replace(/({[^\\s}]+)}/g, function (variableNameWithBrackets) {\n        var _a, _b, _c;\n        var variableName = variableNameWithBrackets.slice(1, -1);\n        switch (variableName) {\n            case 'treeLabel':\n                return (_a = tree.treeLabel) !== null && _a !== void 0 ? _a : '';\n            case 'renamingItem':\n                return tree.renamingItem ? getItemTitle(tree.renamingItem) : 'None';\n            case 'dragItems':\n                return ((_c = (_b = dnd.draggingItems) === null || _b === void 0 ? void 0 : _b.map(function (item) { return environment.getItemTitle(item); }).join(', ')) !== null && _c !== void 0 ? _c : 'None');\n            case 'dropTarget': {\n                if (!dnd.draggingPosition) {\n                    return 'None';\n                }\n                if (dnd.draggingPosition.targetType === 'item' ||\n                    dnd.draggingPosition.targetType === 'root') {\n                    return \"within \".concat(getItemTitle(dnd.draggingPosition.targetItem));\n                }\n                var parentItem = environment.items[dnd.draggingPosition.parentItem];\n                var parentTitle = environment.getItemTitle(parentItem);\n                if (dnd.draggingPosition.childIndex === 0) {\n                    return \"within \".concat(parentTitle, \" at the start\");\n                }\n                return \"within \".concat(parentTitle, \" after \").concat(getItemTitle(parentItem.children[dnd.draggingPosition.childIndex - 1]));\n            }\n            default:\n                if (variableName.startsWith('keybinding:')) {\n                    return keyboardBindings[variableName.slice(11)][0];\n                }\n                throw Error(\"Unknown live descriptor variable {\".concat(variableName, \"}\"));\n        }\n    });\n};\n", "import { useMemo } from 'react';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useDragAndDrop } from '../drag/DragAndDropProvider';\nexport var useCreatedTreeInformation = function (tree, renamingItem, search) {\n    var _a;\n    var environment = useTreeEnvironment();\n    var dnd = useDragAndDrop();\n    var selectedItems = (_a = environment.viewState[tree.treeId]) === null || _a === void 0 ? void 0 : _a.selectedItems;\n    return useMemo(function () {\n        var _a, _b;\n        return ({\n            isFocused: environment.activeTreeId === tree.treeId,\n            isRenaming: !!renamingItem,\n            areItemsSelected: ((_a = selectedItems === null || selectedItems === void 0 ? void 0 : selectedItems.length) !== null && _a !== void 0 ? _a : 0) > 0,\n            isSearching: search !== null,\n            search: search,\n            isProgrammaticallyDragging: (_b = dnd.isProgrammaticallyDragging) !== null && _b !== void 0 ? _b : false,\n            treeId: tree.treeId,\n            rootItem: tree.rootItem,\n            treeLabel: tree.treeLabel,\n            treeLabelledBy: tree.treeLabelledBy,\n        });\n    }, [\n        environment.activeTreeId,\n        tree.treeId,\n        tree.rootItem,\n        tree.treeLabel,\n        tree.treeLabelledBy,\n        renamingItem,\n        selectedItems === null || selectedItems === void 0 ? void 0 : selectedItems.length,\n        search,\n        dnd.isProgrammaticallyDragging,\n    ]);\n};\n", "import * as React from 'react';\nimport { useMemo } from 'react';\nimport { useDragAndDrop } from '../drag/DragAndDropProvider';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useCreatedTreeRef } from './useCreatedTreeRef';\nimport { useTree } from '../tree/Tree';\nimport { useEnvironmentActions } from '../environmentActions/EnvironmentActionsProvider';\nvar EnvironmentActionsContext = React.createContext(null);\nexport var useTreeActions = function () { return React.useContext(EnvironmentActionsContext); };\nexport var TreeActionsProvider = React.forwardRef(function (props, ref) {\n    useTreeEnvironment();\n    var tree = useTree();\n    useDragAndDrop();\n    var envActions = useEnvironmentActions();\n    // TODO change tree childs to use actions rather than output events where possible\n    // TODO maybe replace with stable handlers\n    var actions = useMemo(function () { return ({\n        abortRenamingItem: function () {\n            tree.setRenamingItem(null);\n        },\n        abortSearch: function () {\n            tree.setSearch(null);\n        },\n        collapseItem: function (itemId) {\n            envActions.collapseItem(itemId, tree.treeId);\n        },\n        completeRenamingItem: function () {\n            // TODO\n        },\n        expandItem: function (itemId) {\n            envActions.expandItem(itemId, tree.treeId);\n        },\n        focusItem: function (itemId, setDomFocus) {\n            if (setDomFocus === void 0) { setDomFocus = true; }\n            envActions.focusItem(itemId, tree.treeId, setDomFocus);\n        },\n        focusTree: function (autoFocus) {\n            if (autoFocus === void 0) { autoFocus = true; }\n            envActions.focusTree(tree.treeId, autoFocus);\n        },\n        invokePrimaryAction: function (itemId) {\n            envActions.invokePrimaryAction(itemId, tree.treeId);\n        },\n        moveFocusDown: function () {\n            envActions.moveFocusDown(tree.treeId);\n        },\n        moveFocusUp: function () {\n            envActions.moveFocusUp(tree.treeId);\n        },\n        renameItem: function (itemId, name) {\n            envActions.renameItem(itemId, name, tree.treeId);\n        },\n        selectItems: function (itemsIds) {\n            envActions.selectItems(itemsIds, tree.treeId);\n        },\n        setSearch: function (search) {\n            tree.setSearch(search);\n        },\n        startRenamingItem: function (itemId) {\n            tree.setRenamingItem(itemId);\n        },\n        stopRenamingItem: function () {\n            tree.setRenamingItem(null);\n        },\n        toggleItemExpandedState: function (itemId) {\n            envActions.toggleItemExpandedState(itemId, tree.treeId);\n        },\n        toggleItemSelectStatus: function (itemId) {\n            envActions.toggleItemSelectStatus(itemId, tree.treeId);\n        },\n        expandAll: function () {\n            envActions.expandAll(tree.treeId);\n        },\n        collapseAll: function () {\n            envActions.collapseAll(tree.treeId);\n        },\n        expandSubsequently: function (itemIds) {\n            return envActions.expandSubsequently(tree.treeId, itemIds);\n        },\n    }); }, [envActions, tree]);\n    useCreatedTreeRef(ref, actions);\n    return (React.createElement(EnvironmentActionsContext.Provider, { value: actions }, props.children));\n});\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useImperativeHandle } from 'react';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useDragAndDrop } from '../drag/DragAndDropProvider';\nimport { useTree } from '../tree/Tree';\nexport var useCreatedTreeRef = function (ref, actions) {\n    var environment = useTreeEnvironment();\n    var tree = useTree();\n    var dnd = useDragAndDrop();\n    useImperativeHandle(ref, function () { return (__assign(__assign(__assign({}, actions), { treeEnvironmentContext: environment, dragAndDropContext: dnd, treeContext: tree }), tree.treeInformation)); });\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useMemo } from 'react';\nimport { defaultMatcher } from '../search/defaultMatcher';\nimport { useTree } from '../tree/Tree';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useInteractionManager } from '../controlledEnvironment/InteractionManagerProvider';\nimport { useDragAndDrop } from '../drag/DragAndDropProvider';\nimport { useSelectUpTo } from '../tree/useSelectUpTo';\nimport { useGetOriginalItemOrder } from '../useGetOriginalItemOrder';\n// TODO restructure file. Everything into one hook file without helper methods, let all props be generated outside (InteractionManager and AccessibilityPropsManager), ...\nexport var useTreeItemRenderContext = function (item) {\n    var _a, _b, _c, _d;\n    var _e = useTree(), treeId = _e.treeId, search = _e.search, renamingItem = _e.renamingItem, setRenamingItem = _e.setRenamingItem;\n    var environment = useTreeEnvironment();\n    var interactionManager = useInteractionManager();\n    var dnd = useDragAndDrop();\n    var selectUpTo = useSelectUpTo('last-focus');\n    var itemTitle = item && environment.getItemTitle(item);\n    var getOriginalItemOrder = useGetOriginalItemOrder();\n    var isSearchMatching = useMemo(function () {\n        var _a;\n        return search === null || search.length === 0 || !item || !itemTitle\n            ? false\n            : ((_a = environment.doesSearchMatchItem) !== null && _a !== void 0 ? _a : defaultMatcher)(search, item, itemTitle);\n    }, [search, item, itemTitle, environment.doesSearchMatchItem]);\n    var isSelected = item && ((_b = (_a = environment.viewState[treeId]) === null || _a === void 0 ? void 0 : _a.selectedItems) === null || _b === void 0 ? void 0 : _b.includes(item.index));\n    var isExpanded = item && ((_d = (_c = environment.viewState[treeId]) === null || _c === void 0 ? void 0 : _c.expandedItems) === null || _d === void 0 ? void 0 : _d.includes(item.index));\n    var isRenaming = item && renamingItem === item.index;\n    return useMemo(function () {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (!item) {\n            return undefined;\n        }\n        var viewState = environment.viewState[treeId];\n        var currentlySelectedItems = ((_b = (_a = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) === null || _a === void 0 ? void 0 : _a.map(function (item) { return environment.items[item]; })) !== null && _b !== void 0 ? _b : ((viewState === null || viewState === void 0 ? void 0 : viewState.focusedItem)\n            ? [environment.items[viewState === null || viewState === void 0 ? void 0 : viewState.focusedItem]]\n            : [])).filter(function (item) { return !!item; });\n        var isItemPartOfSelectedItems = !!currentlySelectedItems.find(function (selectedItem) { return selectedItem.index === item.index; });\n        var canDragCurrentlySelectedItems = currentlySelectedItems &&\n            ((_d = (_c = environment.canDrag) === null || _c === void 0 ? void 0 : _c.call(environment, currentlySelectedItems)) !== null && _d !== void 0 ? _d : true) &&\n            currentlySelectedItems\n                .map(function (item) { var _a; return (_a = item.canMove) !== null && _a !== void 0 ? _a : true; })\n                .reduce(function (a, b) { return a && b; }, true);\n        var canDragThisItem = ((_f = (_e = environment.canDrag) === null || _e === void 0 ? void 0 : _e.call(environment, [item])) !== null && _f !== void 0 ? _f : true) && ((_g = item.canMove) !== null && _g !== void 0 ? _g : true);\n        var canDrag = environment.canDragAndDrop &&\n            ((isItemPartOfSelectedItems && canDragCurrentlySelectedItems) ||\n                (!isItemPartOfSelectedItems && canDragThisItem));\n        var canDropOn = environment.canDragAndDrop &&\n            !!((_j = (_h = dnd.viableDragPositions) === null || _h === void 0 ? void 0 : _h[treeId]) === null || _j === void 0 ? void 0 : _j.find(function (position) {\n                return position.targetType === 'item' && position.targetItem === item.index;\n            }));\n        var actions = {\n            // TODO disable most actions during rename\n            primaryAction: function () {\n                var _a;\n                (_a = environment.onPrimaryAction) === null || _a === void 0 ? void 0 : _a.call(environment, environment.items[item.index], treeId);\n            },\n            collapseItem: function () {\n                var _a;\n                (_a = environment.onCollapseItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\n            },\n            expandItem: function () {\n                var _a;\n                (_a = environment.onExpandItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\n            },\n            toggleExpandedState: function () {\n                var _a, _b;\n                if (isExpanded) {\n                    (_a = environment.onCollapseItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\n                }\n                else {\n                    (_b = environment.onExpandItem) === null || _b === void 0 ? void 0 : _b.call(environment, item, treeId);\n                }\n            },\n            selectItem: function () {\n                var _a;\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, [item.index], treeId);\n            },\n            addToSelectedItems: function () {\n                var _a, _b;\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, __spreadArray(__spreadArray([], ((_b = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) !== null && _b !== void 0 ? _b : []), true), [item.index], false), treeId);\n            },\n            unselectItem: function () {\n                var _a, _b, _c;\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, (_c = (_b = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) === null || _b === void 0 ? void 0 : _b.filter(function (id) { return id !== item.index; })) !== null && _c !== void 0 ? _c : [], treeId);\n            },\n            selectUpTo: function (overrideOldSelection) {\n                selectUpTo(item, overrideOldSelection);\n            },\n            startRenamingItem: function () {\n                setRenamingItem(item.index);\n            },\n            stopRenamingItem: function () {\n                setRenamingItem(null);\n            },\n            focusItem: function (setDomFocus) {\n                var _a;\n                if (setDomFocus === void 0) { setDomFocus = true; }\n                (_a = environment.onFocusItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId, setDomFocus);\n            },\n            startDragging: function () {\n                var _a, _b;\n                var selectedItems = (_a = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) !== null && _a !== void 0 ? _a : [];\n                if (!selectedItems.includes(item.index)) {\n                    selectedItems = [item.index];\n                    (_b = environment.onSelectItems) === null || _b === void 0 ? void 0 : _b.call(environment, selectedItems, treeId);\n                }\n                if (canDrag) {\n                    var orderedItems = getOriginalItemOrder(treeId, selectedItems.map(function (id) { return environment.items[id]; }));\n                    dnd.onStartDraggingItems(orderedItems, treeId);\n                }\n            },\n        };\n        var renderFlags = {\n            isSelected: isSelected,\n            isExpanded: isExpanded,\n            isFocused: (viewState === null || viewState === void 0 ? void 0 : viewState.focusedItem) === item.index,\n            isRenaming: isRenaming,\n            isDraggingOver: dnd.draggingPosition &&\n                dnd.draggingPosition.targetType === 'item' &&\n                dnd.draggingPosition.targetItem === item.index &&\n                dnd.draggingPosition.treeId === treeId,\n            isDraggingOverParent: false,\n            isSearchMatching: isSearchMatching,\n            canDrag: canDrag,\n            canDropOn: canDropOn,\n        };\n        var interactiveElementProps = __assign(__assign({}, interactionManager.createInteractiveElementProps(item, treeId, actions, renderFlags, viewState)), {\n            'data-rct-item-interactive': true,\n            'data-rct-item-focus': renderFlags.isFocused ? 'true' : 'false',\n            'data-rct-item-id': item.index,\n        });\n        var itemContainerWithoutChildrenProps = __assign({}, {\n            'data-rct-item-container': 'true',\n        });\n        var itemContainerWithChildrenProps = {\n            role: 'treeitem',\n            'aria-selected': renderFlags.isSelected,\n            'aria-expanded': item.isFolder\n                ? renderFlags.isExpanded\n                    ? 'true'\n                    : 'false'\n                : undefined,\n        };\n        var arrowProps = {\n            onClick: function () {\n                if (item.isFolder) {\n                    actions.toggleExpandedState();\n                }\n                actions.selectItem();\n            },\n            onFocus: function () {\n                actions.focusItem();\n            },\n            onDragOver: function (e) {\n                e.preventDefault(); // Allow drop\n            },\n            'aria-hidden': true,\n            tabIndex: -1,\n        };\n        var viewStateFlags = !viewState\n            ? {}\n            : Object.entries(viewState).reduce(function (acc, _a) {\n                var key = _a[0], value = _a[1];\n                acc[key] = Array.isArray(value)\n                    ? value.includes(item.index)\n                    : value === item.index;\n                return acc;\n            }, {});\n        return __assign(__assign(__assign({}, actions), renderFlags), { interactiveElementProps: interactiveElementProps, itemContainerWithChildrenProps: itemContainerWithChildrenProps, itemContainerWithoutChildrenProps: itemContainerWithoutChildrenProps, arrowProps: arrowProps, viewStateFlags: viewStateFlags });\n    }, [\n        item,\n        environment,\n        treeId,\n        dnd,\n        isSelected,\n        isExpanded,\n        isRenaming,\n        isSearchMatching,\n        interactionManager,\n        selectUpTo,\n        setRenamingItem,\n        getOriginalItemOrder,\n    ]);\n};\n", "import { useRef, useState, } from 'react';\nimport { useTree } from '../tree/Tree';\nimport { useTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { useHotkey } from '../hotkeys/useHotkey';\nimport { useSideEffect } from '../useSideEffect';\nimport { useCallSoon } from '../useCallSoon';\nexport var TreeItemRenamingInput = function (props) {\n    var _a = useTree(), renderers = _a.renderers, treeInformation = _a.treeInformation, setRenamingItem = _a.setRenamingItem, treeId = _a.treeId;\n    var environment = useTreeEnvironment();\n    var inputRef = useRef(null);\n    var submitButtonRef = useRef(null);\n    var item = environment.items[props.itemIndex];\n    var _b = useState(environment.getItemTitle(item)), title = _b[0], setTitle = _b[1];\n    var callSoon = useCallSoon(true);\n    var abort = function () {\n        var _a;\n        (_a = environment.onAbortRenamingItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeInformation.treeId);\n        setRenamingItem(null);\n        callSoon(function () {\n            environment.setActiveTree(treeId);\n        });\n    };\n    var confirm = function () {\n        var _a;\n        (_a = environment.onRenameItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, title, treeInformation.treeId);\n        setRenamingItem(null);\n        callSoon(function () {\n            environment.setActiveTree(treeId);\n        });\n    };\n    useSideEffect(function () {\n        var _a, _b, _c, _d;\n        environment.setActiveTree(treeId);\n        if ((_a = environment.autoFocus) !== null && _a !== void 0 ? _a : true) {\n            (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.select();\n            (_d = (_c = inputRef.current) === null || _c === void 0 ? void 0 : _c.focus) === null || _d === void 0 ? void 0 : _d.call(_c);\n        }\n    }, [environment, treeId], []);\n    useHotkey('abortRenameItem', function () {\n        abort();\n    }, true, true);\n    var inputProps = {\n        value: title,\n        onChange: function (e) {\n            setTitle(e.target.value);\n        },\n        onBlur: function (e) {\n            if (!e.relatedTarget || e.relatedTarget !== submitButtonRef.current) {\n                abort();\n            }\n        },\n        'aria-label': 'New item name',\n        tabIndex: 0,\n    };\n    var submitButtonProps = {\n        onClick: function (e) {\n            e.stopPropagation();\n            confirm();\n        },\n    };\n    var formProps = {\n        onSubmit: function (e) {\n            e.preventDefault();\n            confirm();\n        },\n    };\n    return renderers.renderRenameInput({\n        item: item,\n        inputRef: inputRef,\n        submitButtonProps: submitButtonProps,\n        submitButtonRef: submitButtonRef,\n        formProps: formProps,\n        inputProps: inputProps,\n    });\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport * as React from 'react';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { ControlledTreeEnvironment } from '../controlledEnvironment/ControlledTreeEnvironment';\nimport { CompleteTreeDataProvider } from './CompleteTreeDataProvider';\nimport { useIsMounted } from '../useIsMounted';\nimport { useRefCopy } from '../useRefCopy';\n/* const createCompleteDataProvider = (provider: TreeDataProvider): CompleteTreeDataProvider => ({ // TODO Write class that internally uses provider instead\n  ...provider,\n  getTreeItem: provider.getTreeItem,\n  onDidChangeTreeData: provider.onDidChangeTreeData?.bind(provider) ?? (() => ({ dispose: () => {} })),\n  getTreeItems: provider.getTreeItems?.bind(provider) ?? (itemIds => Promise.all(itemIds.map(id => provider.getTreeItem(id)))),\n  onRenameItem: provider.onRenameItem?.bind(provider) ?? (async () => {}),\n  onChangeItemChildren: provider.onChangeItemChildren?.bind(provider) ?? (async () => {}),\n}); */\nexport var UncontrolledTreeEnvironment = React.forwardRef(function (props, ref) {\n    var _a = useState({}), currentItems = _a[0], setCurrentItems = _a[1];\n    var _b = useState(props.viewState), viewState = _b[0], setViewState = _b[1];\n    var viewStateRef = useRefCopy(viewState);\n    var missingItemIds = useRef([]);\n    var dataProvider = useMemo(function () { return new CompleteTreeDataProvider(props.dataProvider); }, [props.dataProvider]);\n    var isMounted = useIsMounted();\n    var writeItems = useCallback(function (newItems) {\n        if (!isMounted.current)\n            return;\n        setCurrentItems(function (oldItems) { return (__assign(__assign({}, oldItems), newItems)); });\n    }, [isMounted]);\n    var amendViewState = useCallback(function (treeId, constructNewState) {\n        setViewState(function (oldState) {\n            var _a;\n            var _b;\n            return (__assign(__assign({}, oldState), (_a = {}, _a[treeId] = __assign(__assign({}, oldState[treeId]), constructNewState((_b = oldState[treeId]) !== null && _b !== void 0 ? _b : {})), _a)));\n        });\n    }, []);\n    useEffect(function () {\n        var dispose = dataProvider.onDidChangeTreeData(function (changedItemIds) {\n            dataProvider.getTreeItems(changedItemIds).then(function (items) {\n                writeItems(items\n                    .map(function (item) {\n                    var _a;\n                    return (_a = {}, _a[item.index] = item, _a);\n                })\n                    .reduce(function (a, b) { return (__assign(__assign({}, a), b)); }, {}));\n            });\n        }).dispose;\n        return dispose;\n    }, [dataProvider, writeItems]);\n    // TODO memoize props or this component itself\n    return (React.createElement(ControlledTreeEnvironment, __assign({}, props, { ref: ref, viewState: viewState, items: currentItems, onExpandItem: function (item, treeId) {\n            var _a;\n            amendViewState(treeId, function (old) {\n                var _a;\n                return (__assign(__assign({}, old), { expandedItems: __spreadArray(__spreadArray([], ((_a = old.expandedItems) !== null && _a !== void 0 ? _a : []), true), [item.index], false) }));\n            });\n            (_a = props.onExpandItem) === null || _a === void 0 ? void 0 : _a.call(props, item, treeId);\n        }, onCollapseItem: function (item, treeId) {\n            var _a;\n            amendViewState(treeId, function (old) {\n                var _a;\n                return (__assign(__assign({}, old), { expandedItems: (_a = old.expandedItems) === null || _a === void 0 ? void 0 : _a.filter(function (id) { return id !== item.index; }) }));\n            });\n            (_a = props.onCollapseItem) === null || _a === void 0 ? void 0 : _a.call(props, item, treeId);\n        }, onSelectItems: function (items, treeId) {\n            var _a, _b, _c;\n            var oldFocusedItem = (_a = viewStateRef.current[treeId]) === null || _a === void 0 ? void 0 : _a.focusedItem;\n            if (props.disableMultiselect) {\n                var newSelected_1 = oldFocusedItem ? [oldFocusedItem] : [];\n                (_b = props.onSelectItems) === null || _b === void 0 ? void 0 : _b.call(props, newSelected_1, treeId);\n                amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { selectedItems: newSelected_1 })); });\n            }\n            else {\n                (_c = props.onSelectItems) === null || _c === void 0 ? void 0 : _c.call(props, items, treeId);\n                amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { selectedItems: items })); });\n            }\n        }, onFocusItem: function (item, treeId) {\n            var _a;\n            amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { focusedItem: item.index })); });\n            (_a = props.onFocusItem) === null || _a === void 0 ? void 0 : _a.call(props, item, treeId);\n        }, onRenameItem: function (item, name, treeId) { return __awaiter(void 0, void 0, void 0, function () {\n            var newItem;\n            var _a;\n            var _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0: return [4 /*yield*/, dataProvider.onRenameItem(item, name)];\n                    case 1:\n                        _c.sent();\n                        amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { renamingItem: undefined })); });\n                        return [4 /*yield*/, dataProvider.getTreeItem(item.index)];\n                    case 2:\n                        newItem = _c.sent();\n                        writeItems((_a = {}, _a[item.index] = newItem, _a));\n                        (_b = props.onRenameItem) === null || _b === void 0 ? void 0 : _b.call(props, item, name, treeId);\n                        return [2 /*return*/];\n                }\n            });\n        }); }, onDrop: function (items, target) { return __awaiter(void 0, void 0, void 0, function () {\n            var promises, itemsIndices, itemsPriorToInsertion, _loop_1, _i, items_1, item, state_1, newParent, newParentChildren;\n            var _a, _b, _c, _d, _e;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        promises = [];\n                        itemsIndices = items.map(function (i) { return i.index; });\n                        itemsPriorToInsertion = 0;\n                        _loop_1 = function (item) {\n                            var parent_1 = Object.values(currentItems).find(function (potentialParent) { var _a, _b; return (_b = (_a = potentialParent === null || potentialParent === void 0 ? void 0 : potentialParent.children) === null || _a === void 0 ? void 0 : _a.includes) === null || _b === void 0 ? void 0 : _b.call(_a, item.index); });\n                            if (!parent_1) {\n                                throw Error(\"Could not find parent of item \\\"\".concat(item.index, \"\\\"\"));\n                            }\n                            if (!parent_1.children) {\n                                throw Error(\"Parent \\\"\".concat(parent_1.index, \"\\\" of item \\\"\").concat(item.index, \"\\\" did not have any children\"));\n                            }\n                            if (target.targetType === 'between-items' &&\n                                target.parentItem === item.index) {\n                                return { value: void 0 };\n                            }\n                            if ((target.targetType === 'item' || target.targetType === 'root') &&\n                                target.targetItem !== parent_1.index) {\n                                promises.push(dataProvider.onChangeItemChildren(parent_1.index, parent_1.children.filter(function (child) { return child !== item.index; })));\n                            }\n                            if (target.targetType === 'between-items') {\n                                if (target.parentItem === parent_1.index) {\n                                    var newParent = currentItems[target.parentItem];\n                                    var isOldItemPriorToNewItem = ((_b = ((_a = newParent.children) !== null && _a !== void 0 ? _a : []).findIndex(function (child) { return child === item.index; })) !== null && _b !== void 0 ? _b : Infinity) < target.childIndex;\n                                    itemsPriorToInsertion += isOldItemPriorToNewItem ? 1 : 0;\n                                }\n                                else {\n                                    promises.push(dataProvider.onChangeItemChildren(parent_1.index, parent_1.children.filter(function (child) { return child !== item.index; })));\n                                }\n                            }\n                        };\n                        // move old items out\n                        for (_i = 0, items_1 = items; _i < items_1.length; _i++) {\n                            item = items_1[_i];\n                            state_1 = _loop_1(item);\n                            if (typeof state_1 === \"object\")\n                                return [2 /*return*/, state_1.value];\n                        }\n                        // insert new items\n                        if (target.targetType === 'item' || target.targetType === 'root') {\n                            promises.push(dataProvider.onChangeItemChildren(target.targetItem, __spreadArray(__spreadArray([], ((_c = currentItems[target.targetItem].children) !== null && _c !== void 0 ? _c : []).filter(function (i) { return !itemsIndices.includes(i); }), true), itemsIndices, true)));\n                        }\n                        else {\n                            newParent = currentItems[target.parentItem];\n                            newParentChildren = __spreadArray([], ((_d = newParent.children) !== null && _d !== void 0 ? _d : []), true).filter(function (c) { return !itemsIndices.includes(c); });\n                            newParentChildren.splice.apply(newParentChildren, __spreadArray([target.childIndex - itemsPriorToInsertion,\n                                0], itemsIndices, false));\n                            promises.push(dataProvider.onChangeItemChildren(target.parentItem, newParentChildren));\n                        }\n                        return [4 /*yield*/, Promise.all(promises)];\n                    case 1:\n                        _f.sent();\n                        (_e = props.onDrop) === null || _e === void 0 ? void 0 : _e.call(props, items, target);\n                        return [2 /*return*/];\n                }\n            });\n        }); }, onMissingItems: function (itemIds) {\n            var _a;\n            var _b;\n            // Batch individual fetch-item-calls together\n            if (missingItemIds.current.length === 0) {\n                setTimeout(function () {\n                    dataProvider.getTreeItems(missingItemIds.current).then(function (items) {\n                        writeItems(items\n                            .map(function (item) {\n                            var _a;\n                            return (_a = {}, _a[item === null || item === void 0 ? void 0 : item.index] = item, _a);\n                        })\n                            .reduce(function (a, b) { return (__assign(__assign({}, a), b)); }, {}));\n                    });\n                    missingItemIds.current = [];\n                });\n            }\n            (_a = missingItemIds.current).push.apply(_a, itemIds);\n            (_b = props.onMissingItems) === null || _b === void 0 ? void 0 : _b.call(props, itemIds);\n        } }), props.children));\n});\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar CompleteTreeDataProvider = /** @class */ (function () {\n    function CompleteTreeDataProvider(provider) {\n        this.provider = provider;\n    }\n    CompleteTreeDataProvider.prototype.getTreeItem = function (itemId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.provider.getTreeItem(itemId)];\n            });\n        });\n    };\n    CompleteTreeDataProvider.prototype.getTreeItems = function (itemIds) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.provider.getTreeItems\n                        ? this.provider.getTreeItems(itemIds)\n                        : Promise.all(itemIds.map(function (id) { return _this.provider.getTreeItem(id); }))];\n            });\n        });\n    };\n    CompleteTreeDataProvider.prototype.onChangeItemChildren = function (itemId, newChildren) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_c) {\n                return [2 /*return*/, (_b = (_a = this.provider).onChangeItemChildren) === null || _b === void 0 ? void 0 : _b.call(_a, itemId, newChildren)];\n            });\n        });\n    };\n    CompleteTreeDataProvider.prototype.onDidChangeTreeData = function (listener) {\n        return this.provider.onDidChangeTreeData\n            ? this.provider.onDidChangeTreeData(listener)\n            : { dispose: function () { } };\n    };\n    CompleteTreeDataProvider.prototype.onRenameItem = function (item, name) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_c) {\n                return [2 /*return*/, (_b = (_a = this.provider).onRenameItem) === null || _b === void 0 ? void 0 : _b.call(_a, item, name)];\n            });\n        });\n    };\n    return CompleteTreeDataProvider;\n}());\nexport { CompleteTreeDataProvider };\n", "import { useEffect, useRef } from 'react';\nexport var useIsMounted = function () {\n    var mountedRef = useRef(false);\n    useEffect(function () {\n        mountedRef.current = true;\n        return function () {\n            mountedRef.current = false;\n        };\n    }, []);\n    return mountedRef;\n};\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar EventEmitter = /** @class */ (function () {\n    function EventEmitter(options) {\n        this.handlerCount = 0;\n        this.handlers = [];\n        this.options = options;\n    }\n    Object.defineProperty(EventEmitter.prototype, \"numberOfHandlers\", {\n        get: function () {\n            return this.handlers.filter(function (h) { return !!h; }).length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EventEmitter.prototype.emit = function (payload) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var promises, _i, _c, handler, res;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        promises = [];\n                        (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.logger) === null || _b === void 0 ? void 0 : _b.call(_a, 'emit', payload);\n                        for (_i = 0, _c = this.handlers; _i < _c.length; _i++) {\n                            handler = _c[_i];\n                            if (handler) {\n                                res = handler(payload);\n                                if (typeof (res === null || res === void 0 ? void 0 : res.then) === 'function') {\n                                    promises.push(res);\n                                }\n                            }\n                        }\n                        return [4 /*yield*/, Promise.all(promises)];\n                    case 1:\n                        _d.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EventEmitter.prototype.on = function (handler) {\n        var _a, _b;\n        (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.logger) === null || _b === void 0 ? void 0 : _b.call(_a, 'on');\n        this.handlers.push(handler);\n        // eslint-disable-next-line no-plusplus\n        return this.handlerCount++;\n    };\n    EventEmitter.prototype.off = function (handlerId) {\n        this.delete(handlerId);\n    };\n    EventEmitter.prototype.delete = function (handlerId) {\n        var _a, _b;\n        (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.logger) === null || _b === void 0 ? void 0 : _b.call(_a, 'off');\n        this.handlers[handlerId] = null;\n    };\n    return EventEmitter;\n}());\nexport { EventEmitter };\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { EventEmitter } from '../EventEmitter';\nvar StaticTreeDataProvider = /** @class */ (function () {\n    function StaticTreeDataProvider(items, setItemName\n    // private implicitItemOrdering?: (itemA: TreeItem<T>, itemB: TreeItem<T>) => number,\n    ) {\n        /** Emit an event with the changed item ids to notify the tree view about changes. */\n        this.onDidChangeTreeDataEmitter = new EventEmitter();\n        this.data = { items: items };\n        this.setItemName = setItemName;\n    }\n    StaticTreeDataProvider.prototype.getTreeItem = function (itemId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.data.items[itemId]];\n            });\n        });\n    };\n    StaticTreeDataProvider.prototype.onChangeItemChildren = function (itemId, newChildren) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.data.items[itemId].children = newChildren;\n                this.onDidChangeTreeDataEmitter.emit([itemId]);\n                return [2 /*return*/];\n            });\n        });\n    };\n    StaticTreeDataProvider.prototype.onDidChangeTreeData = function (listener) {\n        var _this = this;\n        var handlerId = this.onDidChangeTreeDataEmitter.on(function (payload) {\n            return listener(payload);\n        });\n        return { dispose: function () { return _this.onDidChangeTreeDataEmitter.off(handlerId); } };\n    };\n    StaticTreeDataProvider.prototype.onRenameItem = function (item, name) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (this.setItemName) {\n                    this.data.items[item.index] = this.setItemName(item, name);\n                    // this.onDidChangeTreeDataEmitter.emit(item.index);\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return StaticTreeDataProvider;\n}());\nexport { StaticTreeDataProvider };\n", "import { TreeItemElement } from './treeItem/TreeItemElement';\nimport { TreeItemChildren } from './treeItem/TreeItemChildren';\nexport * from './controlledEnvironment/ControlledTreeEnvironment';\nexport * from './tree/Tree';\nexport * from './uncontrolledEnvironment/UncontrolledTreeEnvironment';\nexport * from './uncontrolledEnvironment/StaticTreeDataProvider';\nexport * from './types';\nexport * from './renderers';\nexport * from './treeItem/useTreeItemRenderContext';\nexport * from './controlledEnvironment/useControlledTreeEnvironmentProps';\nexport var INTERNALS = {\n    TreeItemElement: TreeItemElement,\n    TreeItemChildren: TreeItemChildren,\n};\n"],
  "mappings": "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",
  "names": ["import_react", "import_react", "React", "import_react", "React", "import_react", "InteractionMode", "DoubleClickItemToExpandInteractionManager", "ClickItemToExpandInteractionManager", "ClickArrowToExpandInteractionManager", "_a", "React", "import_react", "import_react", "import_react", "import_react", "import_react", "__assign", "import_react", "import_react", "import_react", "import_react", "DraggingPositionEvaluation", "viableDragPositions", "draggingItems", "_a", "draggingPosition", "treeId", "_b", "_c", "React", "import_react", "import_react", "__assign", "__spreadArray", "childId", "_a", "_b", "import_react", "import_react", "import_react", "__assign", "React", "_a", "__assign", "_a", "_b", "_c", "trees", "items", "treeId", "__assign", "React", "import_react", "React", "import_react", "import_react", "import_react", "import_react", "__assign", "_a", "import_react", "__spreadArray", "_a", "item", "__spreadArray", "linearItems", "_a", "_b", "_a", "__assign", "_a", "_b", "_c", "React", "React", "import_react", "__assign", "import_react", "_a", "React", "import_react", "import_react", "__assign", "EnvironmentActionsContext", "EnvironmentActionsContext", "__assign", "React", "import_react", "__assign", "__spreadArray", "_a", "_b", "_c", "_d", "_e", "item", "import_react", "_a", "_b", "_a", "React", "React", "import_react", "__awaiter", "__generator", "CompleteTreeDataProvider", "import_react", "__assign", "__awaiter", "__generator", "__spreadArray", "_a", "_b", "item", "newParent", "__awaiter", "__generator", "EventEmitter", "__awaiter", "__generator", "StaticTreeDataProvider"]
}
